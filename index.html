<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Immigration SC - Trusted Visa & Study Abroad Consultants</title>
    <meta name="description" content="Global Immigration SC provides expert visa consultation, study abroad programs, and immigration services. Get assistance with student visas, work permits, and relocation.">
    <meta name="keywords" content="immigration consultants, study abroad, visa assistance, work permits, student visa, relocation services, travel consultation">
    <meta name="author" content="Global Immigration SC">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TJCKSJNLPT"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-TJCKSJNLPT');
    </script>
    <!-- End Google Analytics -->
    <!-- Preload critical resources -->
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <style>
        /* Base Styles */
        :root {
            --primary-red: #E30613;
            --primary-white: #FFFFFF;
            --light-gray: #F5F5F5;
            --medium-gray: #777777;
            --dark-gray: #333333;
        }
        /* Ensure loading screen can be hidden */
#loading-screen {
    transition: opacity 0.5s ease !important;
}

#loading-screen[style*="display: none"] {
    display: none !important;
}

/* Add a force-hide class */
.force-hide {
    display: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
}
        /* Custom Scrollbar Styles - Brand Themed */
        /* Always show vertical scrollbar */
        html {
            overflow-y: scroll;
        }

        /* Custom scrollbar styling */
        ::-webkit-scrollbar {
            width: 12px; /* scrollbar width */
        }

        ::-webkit-scrollbar-track {
            background: var(--light-gray); /* Using your CSS variable */
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background-color: var(--primary-red); /* Using your brand red */
            border-radius: 10px; /* rounded edges */
            border: 2px solid var(--light-gray);
        }

        ::-webkit-scrollbar-thumb:hover {
            background-color: #b30000; /* Darker red on hover */
        }

        /* Firefox support */
        * {
            scrollbar-width: thin;
            scrollbar-color: var(--primary-red) var(--light-gray);
        }

        /* For specific application form areas */
        .application-portal,
        .contact-form,
        .modal-content,
        .auth-modal-content,
        .dashboard-content {
            scrollbar-width: thin;
            scrollbar-color: var(--primary-red) var(--light-gray);
        }

        .application-portal::-webkit-scrollbar,
        .contact-form::-webkit-scrollbar,
        .modal-content::-webkit-scrollbar,
        .auth-modal-content::-webkit-scrollbar,
        .dashboard-content::-webkit-scrollbar {
            width: 8px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            line-height: 1.6;
            color: var(--dark-gray);
            background-color: var(--primary-white);
            overflow-x: hidden;
        }
        
        a {
            text-decoration: none;
            color: inherit;
        }
        
        ul {
            list-style: none;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 28px;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 44px;
            min-width: 44px;
        }
        
        .btn-primary {
            background-color: var(--primary-red);
            color: var(--primary-white);
            border: 2px solid var(--primary-red);
        }
        
        .btn-primary:hover {
            background-color: transparent;
            color: var(--primary-red);
        }
        
        .btn-outline {
            background-color: transparent;
            color: var(--primary-red);
            border: 2px solid var(--primary-red);
        }
        
        .btn-outline:hover {
            background-color: var(--primary-red);
            color: var(--primary-white);
        }
        
        .btn-small {
            padding: 10px 16px;
            font-size: 0.9rem;
        }
        
        .btn-live {
            background-color: #ff0000;
            color: white;
            border: none;
        }
        
        .btn-live:hover {
            background-color: #cc0000;
        }
        
        .section {
            padding: 80px 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .section-title h2 {
            font-size: 2.5rem;
            color: var(--dark-gray);
            margin-bottom: 15px;
        }
        
        .section-title p {
            color: var(--medium-gray);
            max-width: 700px;
            margin: 0 auto;
        }
        
        /* Loading Screen */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--primary-white);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }
        
        .loading-logo {
            max-width: 150px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .loading-logo img {
            max-width: 100%;
            height: auto;
            animation: rotateLogo 2s ease-in-out 2;
        }
        
        @keyframes rotateLogo {
            0% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 1.5rem;
            color: var(--primary-red);
            font-weight: 600;
        }
        
        /* Header Styles */
        header {
            background-color: var(--primary-white);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
        }
        
        /* Updated logo styles */
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo img {
            height: 50px;
            width: auto;
            object-fit: contain;
            transition: height 0.3s ease;
        }

        /* Larger logo on desktop */
        @media (min-width: 1200px) {
            .logo img {
                height: 60px;
            }
        }

        /* Better mobile logo sizing */
        @media (max-width: 768px) {
            .logo img {
                height: 45px;
                max-width: 180px;
            }
            
            /* Improve fallback styling */
            .image-fallback {
                padding: 10px;
            }
            
            .image-fallback i {
                font-size: 2.2rem;
            }
        }

        /* Very small devices */
        @media (max-width: 480px) {
            .logo img {
                height: 40px;
                max-width: 160px;
            }
            
            .header-container {
                padding: 8px 15px;
            }
        }
        
        .nav-menu {
            display: flex;
        }
        
        .nav-menu li {
            margin: 0 15px;
            position: relative;
        }
        
        .nav-menu li a {
            color: var(--dark-gray);
            font-weight: 500;
            transition: color 0.3s ease;
            min-height: 44px;
            display: flex;
            align-items: center;
        }
        
        .nav-menu li a:hover {
            color: var(--primary-red);
        }
        
        .dropdown {
            position: relative;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--primary-white);
            min-width: 250px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            z-index: 1;
            border-top: 3px solid var(--primary-red);
        }
        
        .dropdown-content a {
            color: var(--dark-gray);
            padding: 12px 16px;
            display: block;
            min-height: 44px;
            display: flex;
            align-items: center;
        }
        
        .dropdown-content a:hover {
            background-color: var(--light-gray);
            color: var(--primary-red);
        }
        
        .dropdown:hover .dropdown-content {
            display: block;
        }
        
        .mobile-toggle {
            display: none;
            font-size: 1.5rem;
            cursor: pointer;
            min-height: 44px;
            min-width: 44px;
            align-items: center;
            justify-content: center;
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://images.unsplash.com/photo-1488646953014-85cb44e25828?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1800&q=80');
            background-size: cover;
            background-position: center;
            height: 100vh;
            display: flex;
            align-items: center;
            color: var(--primary-white);
            text-align: center;
            margin-top: 70px;
            position: relative;
            overflow: hidden;
        }
        
        .plane-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 1;
        }
        
        .plane {
            position: absolute;
            width: 120px;
            height: 60px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="%23E30613" d="M482.3 192c34.2 0 93.7 29 93.7 64c0 36-59.5 64-93.7 64H365.7L265.2 495.9c-5.7 10-16.3 16.1-27.8 16.1h-56.2c-10.6 0-18.3-10.2-15.4-20.4l49-171.6H112l-43.2 57.6c-3 4-7.8 6.4-12.8 6.4H14c-7.8 0-14-6.3-14-14c0-1.3 .2-2.6 .5-3.9L32 256 .5 145.9c-.4-1.3-.5-2.6-.5-3.9c0-7.8 6.3-14 14-14h42c5 0 9.8 2.4 12.8 6.4L112 192h102.9l-49-171.6C162.9 10.2 170.6 0 181.2 0h56.2c11.5 0 22.1 6.2 27.8 16.1L365.7 192h116.5z"/></svg>') no-repeat center/contain;
            animation: fly 25s linear infinite;
            opacity: 0.9;
        }
        
        @keyframes fly {
            0% {
                left: -10%;
                top: 30%;
                transform: rotate(5deg);
            }
            100% {
                left: 110%;
                top: 30%;
                transform: rotate(5deg);
            }
        }
        
        .plane:nth-child(2) {
            width: 90px;
            height: 45px;
            animation: fly2 30s linear infinite;
            animation-delay: 7s;
            top: 60%;
        }
        
        @keyframes fly2 {
            0% {
                left: -10%;
                top: 60%;
                transform: rotate(-3deg);
            }
            100% {
                left: 110%;
                top: 60%;
                transform: rotate(-3deg);
            }
        }
        
        .plane:nth-child(3) {
            width: 100px;
            height: 50px;
            animation: fly3 35s linear infinite;
            animation-delay: 15s;
            top: 45%;
        }
        
        @keyframes fly3 {
            0% {
                left: -10%;
                top: 45%;
                transform: rotate(2deg);
            }
            100% {
                left: 110%;
                top: 45%;
                transform: rotate(2deg);
            }
        }
        
        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 3;
        }
        
        .hero-content h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            line-height: 1.2;
            color: var(--primary-white);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .hero-content p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: var(--primary-white);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        
        /* About Section */
        .about {
            background-color: var(--primary-white);
        }
        
        .about-content {
            display: flex;
            align-items: center;
            gap: 50px;
        }
        
        .about-text {
            flex: 1;
        }
        
        .about-text h2 {
            font-size: 2.2rem;
            margin-bottom: 20px;
            color: var(--dark-gray);
        }
        
        .about-text p {
            margin-bottom: 15px;
            color: var(--medium-gray);
        }
        
        .about-image {
            flex: 1;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            background-color: var(--light-gray);
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .about-image img {
            width: 100%;
            height: auto;
            display: block;
            object-fit: cover;
        }
        
        /* Services Section */
        .services {
            background-color: var(--light-gray);
        }
        
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .service-card {
            background-color: var(--primary-white);
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .service-icon {
            font-size: 2.5rem;
            color: var(--primary-red);
            margin-bottom: 20px;
        }
        
        .service-card h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--dark-gray);
        }
        
        .service-card p {
            color: var(--medium-gray);
            margin-bottom: 20px;
            flex-grow: 1;
        }
        
        /* Destinations Section */
        .destinations {
            background-color: var(--primary-white);
        }
        
        .flags-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            margin-top: 40px;
        }
        
        .country-flag {
            text-align: center;
            width: 100px;
        }
        
        .flag-icon {
            font-size: 3.5rem;
            margin-bottom: 10px;
        }
        
        .country-name {
            font-weight: 500;
            color: var(--dark-gray);
        }
        
        /* Process Section */
        .process {
            background-color: var(--light-gray);
        }
        
        .process-steps {
            display: flex;
            justify-content: space-between;
            gap: 30px;
            margin-top: 50px;
        }
        
        .step {
            flex: 1;
            text-align: center;
            padding: 30px;
            background-color: var(--primary-white);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .step-number {
            display: inline-block;
            width: 50px;
            height: 50px;
            line-height: 50px;
            background-color: var(--primary-red);
            color: var(--primary-white);
            border-radius: 50%;
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .step h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--dark-gray);
        }
        
        .step p {
            color: var(--medium-gray);
        }
        
        /* Testimonials Section */
        .testimonials {
            background-color: var(--primary-white);
        }
        
        .testimonials-container {
            display: flex;
            gap: 30px;
            margin-top: 50px;
            flex-wrap: wrap;
        }
        
        .testimonial {
            flex: 1;
            min-width: 300px;
            background-color: var(--light-gray);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .testimonial-text {
            font-style: italic;
            margin-bottom: 20px;
            color: var(--dark-gray);
        }
        
        .testimonial-author {
            display: flex;
            align-items: center;
        }
        
        .author-image {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            overflow: hidden;
            margin-right: 15px;
            background-color: var(--medium-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.5rem;
        }
        
        .author-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .author-details h4 {
            color: var(--dark-gray);
            margin-bottom: 5px;
        }
        
        .author-details p {
            color: var(--medium-gray);
            font-size: 0.9rem;
        }
        
        /* Stats Section */
        .stats {
            background: linear-gradient(135deg, var(--primary-red) 0%, #b30000 100%);
            color: white;
            text-align: center;
            padding: 60px 0;
        }
        
        .stats-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 30px;
        }
        
        .stat-item {
            flex: 1;
            min-width: 200px;
        }
        
        .stat-number {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
                .stat-label {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        /* Founder Section */
        .founder {
            background-color: var(--primary-white);
        }
        
        .founder-container {
            display: flex;
            align-items: center;
            gap: 50px;
        }
        
        .founder-image {
            flex: 1;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            background-color: var(--light-gray);
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .founder-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        .founder-content {
            flex: 1;
        }
        
        .founder-content h2 {
            font-size: 2.2rem;
            margin-bottom: 15px;
            color: var(--dark-gray);
        }
        
        .founder-content h3 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary-red);
        }
        
        .founder-content p {
            margin-bottom: 15px;
            color: var(--medium-gray);
            font-style: italic;
        }
        
        .founder-signature {
            margin-top: 25px;
            font-weight: 600;
            color: var(--dark-gray);
            font-style: normal;
        }
        
        /* Team Section */
        .team {
            background-color: var(--light-gray);
            padding: 80px 0;
        }
        
        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .team-member {
            background-color: var(--primary-white);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .team-member:hover {
            transform: translateY(-5px);
        }
        
        .team-image {
            height: 250px;
            overflow: hidden;
            background-color: var(--medium-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .team-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .team-details {
            padding: 20px;
        }
        
        .team-name {
            font-size: 1.3rem;
            margin-bottom: 5px;
            color: var(--dark-gray);
        }
        
        .team-position {
            color: var(--primary-red);
            font-weight: 500;
            margin-bottom: 10px;
        }
        
        .team-description {
            color: var(--medium-gray);
            font-size: 0.9rem;
        }
        
        /* Contact Section */
        .contact {
            background-color: var(--light-gray);
        }
        
        .contact-container {
            display: flex;
            gap: 50px;
        }
        
        .contact-info {
            flex: 1;
        }
        
        .contact-info h3 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--dark-gray);
        }
        
        .contact-details {
            margin-bottom: 30px;
        }
        
        .contact-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .contact-icon {
            color: var(--primary-red);
            font-size: 1.2rem;
            margin-right: 15px;
            margin-top: 3px;
        }
        
        .contact-text {
            color: var(--medium-gray);
        }
        
        .office-hours {
            margin-top: 30px;
        }
        
        .office-hours h4 {
            margin-bottom: 15px;
            color: var(--dark-gray);
        }
        
        .hours-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .hours-table tr {
            border-bottom: 1px solid #eee;
        }
        
        .hours-table td {
            padding: 8px 0;
        }
        
        .hours-table td:last-child {
            text-align: right;
        }
        
        .contact-form {
            flex: 1;
            background-color: var(--primary-white);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark-gray);
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-control:focus {
            border-color: var(--primary-red);
            outline: none;
        }
        
        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }
        
        .form-error {
            color: var(--primary-red);
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }
        
        .form-success {
            background-color: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
            text-align: center;
            display: none;
        }
        
        /* Live Session Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: var(--primary-white);
            padding: 30px;
            border-radius: 8px;
            max-width: 500px;
            width: 90%;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--medium-gray);
            min-height: 44px;
            min-width: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .live-session-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }
        
        .session-option {
            padding: 15px;
            border: 2px solid var(--primary-red);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 44px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .session-option:hover {
            background-color: var(--primary-red);
            color: var(--primary-white);
        }
        
        /* Footer */
        footer {
            background-color: var(--primary-red);
            color: var(--primary-white);
            padding: 60px 0 30px;
        }
        
        .footer-container {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .footer-col {
            flex: 1;
            min-width: 200px;
        }
        
        .footer-col h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
            color: white;
        }
        
        .footer-col h3::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 40px;
            height: 2px;
            background-color: var(--primary-white);
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            transition: color 0.3s ease;
            min-height: 44px;
            display: flex;
            align-items: center;
        }
        
        .footer-links a:hover {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .social-links {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .social-links a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transition: background-color 0.3s ease;
        }
        
        .social-links a:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .qr-code {
            max-width: 150px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            background-color: white;
            padding: 10px;
        }
        
        .qr-code img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .footer-tagline {
            font-size: 1.2rem;
            margin-bottom: 15px;
        }
        
        /* WhatsApp Float */
        .whatsapp-float {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background-color: #25D366;
            color: var(--primary-white);
            border-radius: 50%;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            transition: all 0.3s ease;
        }
        
        .whatsapp-float:hover {
            transform: scale(1.1);
            background-color: #128C7E;
        }
        
        /* Blog Preview Section */
        .blog-preview {
            background-color: var(--primary-white);
            padding: 80px 0;
        }
        
        .blog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .blog-card {
            background-color: var(--light-gray);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        
        .blog-card:hover {
            transform: translateY(-5px);
        }
        
        .blog-image {
            height: 200px;
            overflow: hidden;
            background-color: var(--medium-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .blog-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .blog-card:hover .blog-image img {
            transform: scale(1.05);
        }
        
        .blog-content {
            padding: 20px;
            display: flex;
            flex-direction: column;
            height: 220px;
        }
        
        .blog-date {
            font-size: 0.9rem;
            color: var(--medium-gray);
            margin-bottom: 10px;
        }
        
        .blog-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: var(--dark-gray);
        }
        
        .blog-excerpt {
            color: var(--medium-gray);
            margin-bottom: 15px;
            flex-grow: 1;
        }
        
        /* Facebook Feed Styles */
        .facebook-feed {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .fb-post {
            background-color: var(--light-gray);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        
        .fb-post:hover {
            transform: translateY(-5px);
        }
        
        .fb-image {
            height: 200px;
            overflow: hidden;
            background-color: var(--medium-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .fb-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .fb-post:hover .fb-image img {
            transform: scale(1.05);
        }
        
        .fb-content {
            padding: 20px;
            display: flex;
            flex-direction: column;
            height: 220px;
        }
        
        .fb-date {
            font-size: 0.9rem;
            color: var(--medium-gray);
            margin-bottom: 10px;
        }
        
        .fb-message {
            color: var(--medium-gray);
            margin-bottom: 15px;
            flex-grow: 1;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 4;
            -webkit-box-orient: vertical;
        }
        
        /* Newsletter Section */
        .newsletter {
            background-color: #f8f9fa;
            padding: 60px 0;
            text-align: center;
            display: block;
        }
        
        .newsletter-content {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .newsletter-form {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }
        
        .newsletter-input {
            flex: 1;
            min-width: 250px;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        /* Application Portal Styles */
        .application-portal {
            background-color: var(--light-gray);
            padding: 80px 0;
        }
        
        .portal-options {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 40px;
            flex-wrap: wrap;
        }
        
        .portal-option {
            background-color: var(--primary-white);
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            width: 300px;
        }
        
        .portal-option:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .portal-icon {
            font-size: 3rem;
            color: var(--primary-red);
            margin-bottom: 20px;
        }
        
        .portal-option h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--dark-gray);
        }
        
        .portal-option p {
            color: var(--medium-gray);
            margin-bottom: 25px;
        }
        
        /* Authentication Modal Styles */
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .auth-modal-content {
            background-color: var(--primary-white);
            padding: 30px;
            border-radius: 8px;
            max-width: 500px;
            width: 90%;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .auth-tab {
            flex: 1;
            text-align: center;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .auth-tab.active {
            border-bottom: 3px solid var(--primary-red);
            color: var(--primary-red);
            font-weight: 600;
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .password-strength {
            margin-top: 5px;
            height: 5px;
            background-color: #eee;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .password-strength-bar {
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .password-strength-text {
            font-size: 0.8rem;
            margin-top: 5px;
            color: var(--medium-gray);
        }
        
        .password-strength.weak .password-strength-bar {
            background-color: #ff4d4d;
            width: 33%;
        }
        
        .password-strength.medium .password-strength-bar {
            background-color: #ffa500;
            width: 66%;
        }
        
        .password-strength.strong .password-strength-bar {
            background-color: #4CAF50;
            width: 100%;
        }
        
        /* Dashboard Styles */
        .dashboard {
            background-color: var(--light-gray);
            min-height: 100vh;
            padding-top: 100px;
        }
        
        .dashboard-header {
            background-color: var(--primary-white);
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .dashboard-container {
            display: flex;
            gap: 30px;
        }
        
        .dashboard-sidebar {
            width: 250px;
            background-color: var(--primary-white);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 20px;
        }
        
        .dashboard-content {
            flex: 1;
            background-color: var(--primary-white);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 30px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .sidebar-menu {
            list-style: none;
        }
        
        .sidebar-menu li {
            margin-bottom: 10px;
        }
        
        .sidebar-menu a {
            display: block;
            padding: 12px 15px;
            border-radius: 4px;
            transition: all 0.3s ease;
            color: var(--dark-gray);
        }
        
        .sidebar-menu a:hover, .sidebar-menu a.active {
            background-color: var(--light-gray);
            color: var(--primary-red);
        }
        
        .dashboard-section {
            display: none;
        }
        
        .dashboard-section.active {
            display: block;
        }
        
        .progress-bar {
            height: 10px;
            background-color: #eee;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--primary-red);
            border-radius: 5px;
            transition: width 0.5s ease;
        }
        
        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .progress-step {
            text-align: center;
            flex: 1;
            position: relative;
        }
        
        .progress-step:not(:last-child):after {
            content: '';
            position: absolute;
            top: 20px;
            right: -50%;
            width: 100%;
            height: 2px;
            background-color: #eee;
            z-index: 1;
        }
        
        .step-indicator {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            position: relative;
            z-index: 2;
        }
        
        .step-indicator.active {
            background-color: var(--primary-red);
            color: white;
        }
        
        .step-indicator.completed {
            background-color: #4CAF50;
            color: white;
        }
        
        .documents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .document-card {
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .document-status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-top: 10px;
        }
        
        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .status-approved {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status-rejected {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .payment-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .payment-table th, .payment-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .payment-table th {
            background-color: var(--light-gray);
            font-weight: 600;
        }
        
        .payment-status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status-completed {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .status-failed {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .profile-form {
            max-width: 600px;
        }
        
        /* Add these new styles for enhanced functionality */
        .upload-area {
            border: 2px dashed #ccc;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: var(--primary-red);
            background-color: #f9f9f9;
        }
        
        .upload-area.dragover {
            border-color: var(--primary-red);
            background-color: #fff0f0;
        }
        
        .upload-progress {
            width: 100%;
            height: 8px;
            background-color: #f0f0f0;
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .upload-progress-bar {
            height: 100%;
            background-color: var(--primary-red);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .admin-dashboard {
            background-color: #f8f9fa;
            min-height: 100vh;
            padding-top: 80px;
        }
        
        .admin-header {
            background-color: var(--primary-white);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }
        
        .applicant-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .applicant-card:hover {
            transform: translateY(-2px);
        }
        
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status-new { background: #e3f2fd; color: #1976d2; }
        .status-review { background: #fff3e0; color: #f57c00; }
        .status-approved { background: #e8f5e8; color: #2e7d32; }
        .status-rejected { background: #ffebee; color: #c62828; }
        
        .document-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .document-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .document-actions {
            display: flex;
            gap: 10px;
        }
        
        .file-preview {
            max-width: 200px;
            max-height: 150px;
            margin: 10px 0;
            border-radius: 4px;
        }
        
        /* Responsive Styles */
        @media (max-width: 992px) {
            .about-content,
            .contact-container,
            .founder-container {
                flex-direction: column;
            }
            
            .process-steps {
                flex-direction: column;
                gap: 20px;
            }
            
            .hero-content h1 {
                font-size: 2.5rem;
            }
            
            .founder-image {
                order: -1;
            }
            
            .stats-container {
                flex-direction: column;
                gap: 40px;
            }
            
            .team-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .blog-grid,
            .facebook-feed {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .dashboard-container {
                flex-direction: column;
            }
            
            .dashboard-sidebar {
                width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            .mobile-toggle {
                display: flex;
            }
            
            .nav-menu {
                position: fixed;
                top: 70px;
                left: -100%;
                width: 80%;
                height: calc(100vh - 70px);
                background-color: var(--primary-white);
                flex-direction: column;
                padding: 40px 20px;
                box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
                transition: left 0.3s ease, transform 0.3s ease, opacity 0.3s ease;
                z-index: 1000;
                overflow-y: auto;
            }
            
            .nav-menu.active {
                left: 0;
            }
            
            .nav-menu li {
                margin: 15px 0;
                width: 100%;
            }
            
            .nav-menu li a {
                display: block;
                padding: 10px 0;
                border-bottom: 1px solid #eee;
            }
            
            .dropdown-content {
                position: static;
                box-shadow: none;
                margin-left: 20px;
                margin-top: 10px;
                display: none;
                width: 100%;
            }
            
            .dropdown.active .dropdown-content {
                display: block;
            }
            
            .dropdown > a::after {
                content: ' ';
                font-size: 0.8em;
                float: right;
                margin-left: 5px;
            }
            
            /* Hero section adjustments for mobile */
            .hero {
                height: 80vh;
                min-height: 500px;
            }
            
            .hero-content h1 {
                font-size: 2rem;
                line-height: 1.3;
            }
            
            .hero-content p {
                font-size: 1rem;
                margin-bottom: 25px;
            }
            
            .hero-buttons {
                flex-direction: column;
                gap: 12px;
            }
            
            .hero-buttons .btn {
                width: 100%;
                text-align: center;
            }
            
            .section {
                padding: 60px 0;
            }
            
            .section-title h2 {
                font-size: 2rem;
            }
            
            .blog-grid,
            .facebook-feed {
                grid-template-columns: 1fr;
            }
            
            .newsletter-form {
                flex-direction: column;
            }
            
            .newsletter-input {
                min-width: 100%;
            }
            
            .testimonials-container {
                flex-direction: column;
            }
            
            .team-grid {
                grid-template-columns: 1fr;
            }
            
            .portal-options {
                flex-direction: column;
                align-items: center;
            }
            
            .portal-option {
                width: 100%;
                max-width: 300px;
            }
            
            /* Fix for the live session button on mobile */
            .nav-menu li:last-child a {
                background-color: var(--primary-red);
                color: white;
                text-align: center;
                padding: 12px;
                border-radius: 4px;
                margin-top: 20px;
                border: none;
            }
            
            /* Improve dropdown handling on mobile */
            .dropdown-content {
                margin-left: 0;
                margin-top: 10px;
                padding-left: 15px;
            }
            
            .dropdown-content a {
                padding: 10px 15px;
                font-size: 0.95rem;
            }
        }
        
        /* Additional mobile fixes for very small screens */
        @media (max-width: 480px) {
            .hero-content h1 {
                font-size: 1.8rem;
            }
            
            .mobile-toggle {
                font-size: 1.2rem;
            }
            
            .services-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .service-card {
                padding: 20px;
            }
            
            .form-control, .newsletter-input {
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .form-group {
                margin-bottom: 15px;
            }
            
            .contact-form {
                padding: 20px;
            }
            
            .footer-container {
                flex-direction: column;
                gap: 30px;
            }
            
            .footer-col {
                min-width: 100%;
            }
            
            .social-links {
                justify-content: center;
            }
        }
        
        /* Accessibility Improvements */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary-red);
            color: white;
            padding: 8px;
            z-index: 100;
            transition: top 0.3s;
        }
        
        .skip-link:focus {
            top: 0;
        }
        
        /* Focus styles for accessibility */
        a:focus, button:focus, input:focus, textarea:focus, select:focus {
            outline: 2px solid var(--primary-red);
            outline-offset: 2px;
        }
        
        /* Loading spinner */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
            vertical-align: middle;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Reduced motion for accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            .plane {
                display: none;
            }
            
            .loading-logo img {
                animation: none;
            }
        }
        
        /* Image fallback styles */
        .image-fallback {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 30px;
            color: #666;
            background-color: #f5f5f5;
            border-radius: 8px;
        }
        
        .image-fallback i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--primary-red);
        }
        
        .image-fallback p {
            font-size: 0.9rem;
        }
        
        /* Lazy loading for images */
        img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-logo">
            <picture>
    <source srcset="GISC-LOGO.webp" type="image/webp">
    <source srcset="GISC-LOGO.png" type="image/png"> 
    <img src="GISC-LOGO.png" alt="Global Immigration SC Logo" onerror="this.onerror=null; this.style.display='none'; document.getElementById('logo-fallback').style.display='flex';">
</picture>
            <div id="logo-fallback" class="image-fallback" style="display: none;">
                <i class="fas fa-globe-americas"></i>
                <p>Global Immigration SC Logo</p>
            </div>
        </div>
        <div class="loading-text">Direction to Your Destination</div>
    </div>

    <!-- Live Session Modal -->
    <div id="liveSessionModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Join Our Live Session</h2>
            <div class="live-session-options">
                <div class="session-option" id="joinLive">
                    <h3>Join Our Live Stream</h3>
                    <p>Watch our current live session on YouTube</p>
                </div>
                <div class="session-option" id="registerSession">
                    <h3>Register for Upcoming Session</h3>
                    <p>Get notified about our next live session</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Session Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Register for Upcoming Session</h2>
            <form id="sessionForm" action="https://formspree.io/f/mrbaejkr" method="POST">
                <div class="form-group">
                    <label for="sessionName">Full Name *</label>
                    <input type="text" id="sessionName" name="name" class="form-control" required>
                    <div class="form-error" id="sessionNameError">Please enter your full name</div>
                </div>
                
                <div class="form-group">
                    <label for="sessionEmail">Email Address *</label>
                    <input type="email" id="sessionEmail" name="email" class="form-control" required>
                    <div class="form-error" id="sessionEmailError">Please enter a valid email address</div>
                </div>
                
                <div class="form-group">
                    <label for="notifyMe" style="display: flex; align-items: center; gap: 10px;">
                        <input type="checkbox" id="notifyMe" name="notify" value="yes" checked>
                        Notify me when the session starts
                    </label>
                </div>
                
                <input type="hidden" name="form_type" value="session_registration">
                
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <span class="btn-text">Send Registration</span>
                    <span class="loading-spinner" style="display: none;"></span>
                </button>
                
                <div id="sessionSuccess" class="form-success">
                    Thank you for registering! We will notify you when our next session starts.
                </div>
            </form>
        </div>
    </div>

    <!-- Authentication Modal -->
    <div id="authModal" class="auth-modal">
        <div class="auth-modal-content">
            <span class="close-modal">&times;</span>
            <div class="auth-tabs">
                <div class="auth-tab active" data-tab="login">Login</div>
                <div class="auth-tab" data-tab="register">Register</div>
            </div>
            
            <form id="loginForm" class="auth-form active" action="https://formspree.io/f/mrbaejkr" method="POST">
                <div class="form-group">
                    <label for="loginEmail">Email Address *</label>
                    <input type="email" id="loginEmail" name="email" class="form-control" required>
                    <div class="form-error" id="loginEmailError">Please enter a valid email address</div>
                </div>
                
                <div class="form-group">
                    <label for="loginPassword">Password *</label>
                    <input type="password" id="loginPassword" name="password" class="form-control" required>
                    <div class="form-error" id="loginPasswordError">Please enter your password</div>
                </div>
                
                <div class="form-group" style="display: flex; justify-content: space-between; align-items: center;">
                    <label for="rememberMe" style="display: flex; align-items: center; gap: 5px;">
                        <input type="checkbox" id="rememberMe" name="remember" value="yes">
                        Remember me
                    </label>
                    <a href="#" id="forgotPassword" style="color: var(--primary-red);">Forgot Password?</a>
                </div>
                
                <input type="hidden" name="form_type" value="login">
                
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <span class="btn-text">Login</span>
                    <span class="loading-spinner" style="display: none;"></span>
                </button>
            </form>
            
            <form id="registerForm" class="auth-form" action="https://formspree.io/f/mrbaejkr" method="POST">
                <div class="form-group">
                    <label for="registerName">Full Name *</label>
                    <input type="text" id="registerName" name="name" class="form-control" required>
                    <div class="form-error" id="registerNameError">Please enter your full name</div>
                </div>
                
                <div class="form-group">
                    <label for="registerEmail">Email Address *</label>
                    <input type="email" id="registerEmail" name="email" class="form-control" required>
                    <div class="form-error" id="registerEmailError">Please enter a valid email address</div>
                </div>
                
                <div class="form-group">
                    <label for="registerPassword">Password *</label>
                    <input type="password" id="registerPassword" name="password" class="form-control" required>
                    <div class="password-strength">
                        <div class="password-strength-bar"></div>
                    </div>
                    <div class="password-strength-text"></div>
                    <div class="form-error" id="registerPasswordError">Please enter a strong password</div>
                </div>
                
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password *</label>
                    <input type="password" id="confirmPassword" name="confirm_password" class="form-control" required>
                    <div class="form-error" id="confirmPasswordError">Passwords do not match</div>
                </div>
                
                <div class="form-group">
                    <label for="agreeTerms" style="display: flex; align-items: center; gap: 5px;">
                        <input type="checkbox" id="agreeTerms" name="agree_terms" value="yes" required>
                        I agree to the <a href="#" style="color: var(--primary-red);">Terms of Service</a> and <a href="#" style="color: var(--primary-red);">Privacy Policy</a>
                    </label>
                    <div class="form-error" id="agreeTermsError">You must agree to the terms and conditions</div>
                </div>
                
                <input type="hidden" name="form_type" value="registration">
                
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <span class="btn-text">Create Account</span>
                    <span class="loading-spinner" style="display: none;"></span>
                </button>
            </form>
        </div>
    </div>

    <!-- Skip link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header -->
    <header>
        <div class="header-container container">
            <div class="logo">
                <picture>
    <source srcset="GISC-LOGO.webp" type="image/webp">
    <source srcset="GISC-LOGO.png" type="image/png"> 
    <img src="GISC-LOGO.png" alt="Global Immigration SC Logo" onerror="this.onerror=null; this.style.display='none'; document.getElementById('header-logo-fallback').style.display='flex';">
</picture>
                <div id="header-logo-fallback" class="image-fallback" style="display: none;">
                    <i class="fas fa-globe-americas"></i>
                    <p>Global Immigration SC</p>
                </div>
            </div>
            
            <div class="mobile-toggle" aria-label="Toggle navigation menu">
                <i class="fas fa-bars" aria-hidden="true"></i>
            </div>
            
            <nav aria-label="Main navigation">
                <ul class="nav-menu">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#about">About Us</a></li>
                    <li class="dropdown">
                        <a href="#services">Services <i class="fas fa-chevron-down" aria-hidden="true"></i></a>
                        <div class="dropdown-content">
                            <a href="#">Business Trip Visa Application & Planning</a>
                            <a href="#">Study Abroad Admissions & Scholarship Support</a>
                            <a href="#">Visa Application & Embassy Interview Coaching</a>
                            <a href="#">Work & Immigration Assistance</a>
                            <a href="#">Student Loan & Sponsorship</a>
                            <a href="#">Flight, Hotel & Accommodation Booking</a>
                            <a href="#">Relocation Support & Document Translation</a>
                            <a href="#">Travel Insurance & Medical Clearance</a>
                            <a href="#">Educational & Cultural Exchange Programs</a>
                            <a href="#">Pre-Departure Orientation & Airport Pickup</a>
                        </div>
                    </li>
                    <li><a href="#destinations">Destinations</a></li>
                    <li><a href="#blog">Blog</a></li>
                    <li><a href="#application-portal">Application Portal</a></li>
                    <li><a href="#contact">Contact Us</a></li>
                    <li><a href="#" class="btn btn-live" id="liveSessionBtn"><i class="fas fa-video" aria-hidden="true"></i> Watch Our Live Session</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="plane-container" aria-hidden="true">
            <div class="plane"></div>
            <div class="plane"></div>
            <div class="plane"></div>
        </div>
        
        <div class="hero-content">
            <h1>Global Immigration SC  Your Trusted Travel & Study Partner</h1>
            <p>We help students, professionals, and travelers achieve their global dreams with end-to-end immigration and study abroad solutions.</p>
            <div class="hero-buttons">
                <a href="https://docs.google.com/forms/d/1HUsRbKHsZlZKL7T2DgT7crgAhkAnuslmWjopUD2Cutg/edit" class="btn btn-primary">Book Appointment</a>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSeWRMWtwbyzkyOp0D5LNrRdef4v4pvIX0Ki0JS62bE0u1tqSA/viewform?pli=1" class="btn btn-outline">Start Application</a>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main id="main-content">
        <!-- About Section -->
        <section id="about" class="section about">
            <div class="container">
                <div class="about-content">
                    <div class="about-text">
                        <h2>About Global Immigration SC</h2>
                        <p>At Global Immigration SC, we guide you step by step  from admission and visa applications to travel, relocation and settlement.</p>
                        <p>With years of expertise in immigration consulting, we've helped hundreds of clients achieve their dreams of studying, working, and traveling abroad. Our team of experienced consultants provides personalized support throughout your journey.</p>
                        <p>We pride ourselves on our transparent processes, ethical practices, and commitment to your success. Your global journey is our priority.</p>
                    </div>
                    <div class="about-image">
                        <picture>
    <source srcset="IMAGES.webp" type="image/webp">
    <source srcset="IMAGES.jpg" type="image/jpeg"> 
    <img src="IMAGES.jpg" alt="Diverse group of immigrants and professionals working together at a table" onerror="this.onerror=null; this.style.display='none'; document.getElementById('about-fallback').style.display='flex';">
</picture>
                        <div id="about-fallback" class="image-fallback" style="display: none;">
                            <i class="fas fa-users"></i>
                            <p>Our diverse team of professionals</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stats Section -->
        <section class="stats">
            <div class="container">
                <div class="stats-container">
                    <div class="stat-item">
                        <div class="stat-number" id="clients">500+</div>
                        <div class="stat-label">Happy Clients</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="success">98%</div>
                        <div class="stat-label">Success Rate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="countries">80+</div>
                        <div class="stat-label">Countries</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="experience">10+</div>
                        <div class="stat-label">Years Experience</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" class="section services">
            <div class="container">
                <div class="section-title">
                    <h2>Our Full-Service Offers</h2>
                    <p>Comprehensive immigration and study abroad services to meet all your needs</p>
                </div>
                
                <div class="services-grid">
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-briefcase" aria-hidden="true"></i>
                        </div>
                        <h3>Business Trip Visa Application & Planning</h3>
                        <p>Professional visa services for business travelers and corporate clients with expedited processing options.</p>
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSeWRMWtwbyzkyOp0D5LNrRdef4v4pvIX0Ki0JS62bE0u1tqSA/viewform?pli=1" class="btn btn-primary btn-small">Apply Now</a>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-graduation-cap" aria-hidden="true"></i>
                        </div>
                        <h3>Study Abroad Admissions & Scholarship Support</h3>
                        <p>Guidance through university applications and scholarship opportunities with 95% acceptance rate.</p>
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSeWRMWtwbyzkyOp0D5LNrRdef4v4pvIX0Ki0JS62bE0u1tqSA/viewform?pli=1" class="btn btn-primary btn-small">Apply Now</a>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-passport" aria-hidden="true"></i>
                        </div>
                        <h3>Visa Application & Embassy Interview Coaching</h3>
                        <p>Complete visa processing and interview preparation services with mock interview sessions.</p>
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSeWRMWtwbyzkyOp0D5LNrRdef4v4pvIX0Ki0JS62bE0u1tqSA/viewform?pli=1" class="btn btn-primary btn-small">Apply Now</a>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-building" aria-hidden="true"></i>
                        </div>
                        <h3>Work & Immigration Assistance</h3>
                        <p>Support with work permits and permanent residency applications for skilled professionals.</p>
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSeWRMWtwbyzkyOp0D5LNrRdef4v4pvIX0Ki0JS62bE0u1tqSA/viewform?pli=1" class="btn btn-primary btn-small">Apply Now</a>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-hand-holding-usd" aria-hidden="true"></i>
                        </div>
                        <h3>Student Loan & Sponsorship</h3>
                        <p>Assistance with MPOWER, SOFI, and other financing options with high approval rates.</p>
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSeWRMWtwbyzkyOp0D5LNrRdef4v4pvIX0Ki0JS62bE0u1tqSA/viewform?pli=1" class="btn btn-primary btn-small">Apply Now</a>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-hotel" aria-hidden="true"></i>
                        </div>
                        <h3>Flight, Hotel & Accommodation Booking</h3>
                        <p>Travel and accommodation arrangements for your relocation with exclusive partner discounts.</p>
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSeWRMWtwbyzkyOp0D5LNrRdef4v4pvIX0Ki0JS62bE0u1tqSA/viewform?pli=1" class="btn btn-primary btn-small">Apply Now</a>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-people-carry" aria-hidden="true"></i>
                        </div>
                        <h3>Relocation Support & Document Translation</h3>
                        <p>Comprehensive relocation services and certified document translation in 24+ languages.</p>
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSeWRMWtwbyzkyOp0D5LNrRdef4v4pvIX0Ki0JS62bE0u1tqSA/viewform?pli=1" class="btn btn-primary btn-small">Apply Now</a>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-heartbeat" aria-hidden="true"></i>
                        </div>
                        <h3>Travel Insurance & Medical Clearance</h3>
                        <p>Health insurance and medical examination coordination with recognized healthcare providers.</p>
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSeWRMWtwbyzkyOp0D5LNrRdef4v4pvIX0Ki0JS62bE0u1tqSA/viewform?pli=1" class="btn btn-primary btn-small">Apply Now</a>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-exchange-alt" aria-hidden="true"></i>
                        </div>
                        <h3>Educational & Cultural Exchange Programs</h3>
                        <p>Opportunities for cultural exchange and international education with 50+ partner institutions.</p>
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSeWRMWtwbyzkyOp0D5LNrRdef4v4pvIX0Ki0JS62bE0u1tqSA/viewform?pli=1" class="btn btn-primary btn-small">Apply Now</a>
                    </div>
                    
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-plane-departure" aria-hidden="true"></i>
                        </div>
                        <h3>Pre-Departure Orientation & Airport Pickup</h3>
                        <p>Preparation sessions and arrival assistance at your destination with local support teams.</p>
                        <a href="https://docs.google.com/forms/d/e/1FAIpQLSeWRMWtwbyzkyOp0D5LNrRdef4v4pvIX0Ki0JS62bE0u1tqSA/viewform?pli=1" class="btn btn-primary btn-small">Apply Now</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Application Portal Section -->
        <section id="application-portal" class="section application-portal">
            <div class="container">
                <div class="section-title">
                    <h2>Application Portal</h2>
                    <p>Access your application dashboard to track progress, upload documents, and manage your immigration journey</p>
                </div>
                
                <div class="portal-options">
                    <div class="portal-option">
                        <div class="portal-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <h3>New Applicants</h3>
                        <p>Create a new account to start your application process</p>
                        <a href="#" class="btn btn-primary" id="registerBtn">Register</a>
                    </div>
                    
                    <div class="portal-option">
                        <div class="portal-icon">
                            <i class="fas fa-sign-in-alt"></i>
                        </div>
                        <h3>Returning Applicants</h3>
                        <p>Login to your existing account to continue your application</p>
                        <a href="#" class="btn btn-outline" id="loginBtn">Login</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Destinations Section -->
        <section id="destinations" class="section destinations">
            <div class="container">
                <div class="section-title">
                    <h2>Destinations We Serve</h2>
                    <p>We provide immigration and study services for these popular destinations</p>
                </div>
                
                <div class="flags-container">
                    <div class="country-flag">
                        <div class="flag-icon" aria-label="United States flag"></div>
                        <div class="country-name">USA</div>
                    </div>
                    
                    <div class="country-flag">
                        <div class="flag-icon" aria-label="Canada flag"></div>
                        <div class="country-name">Canada</div>
                    </div>
                    
                    <div class="country-flag">
                        <div class="flag-icon" aria-label="Switzerland flag"></div>
                        <div class="country-name">Switzerland</div>
                    </div>
                    
                    <div class="country-flag">
                        <div class="flag-icon" aria-label="Sweden flag"></div>
                        <div class="country-name">Sweden</div>
                    </div>
                    
                    <div class="country-flag">
                        <div class="flag-icon" aria-label="Australia flag"></div>
                        <div class="country-name">Australia</div>
                    </div>
                    
                    <div class="country-flag">
                        <div class="flag-icon" aria-label="Ireland flag"></div>
                        <div class="country-name">Ireland</div>
                    </div>
                    
                    <div class="country-flag">
                        <div class="flag-icon" aria-label="Austria flag"></div>
                        <div class="country-name">Austria</div>
                    </div>
                    
                    <div class="country-flag">
                        <div class="flag-icon" aria-label="Finland flag"></div>
                        <div class="country-name">Finland</div>
                    </div>
                    
                    <div class="country-flag">
                        <div class="flag-icon" aria-label="Germany flag"></div>
                        <div class="country-name">Germany</div>
                    </div>
                    
                    <div class="country-flag">
                        <div class="flag-icon" aria-label="United Arab Emirates flag"></div>
                        <div class="country-name">UAE</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Process Section -->
        <section class="section process">
            <div class="container">
                <div class="section-title">
                    <h2>How It Works</h2>
                    <p>Our simple 3-step process to make your global dreams a reality</p>
                </div>
                
                <div class="process-steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <h3>Consultation & Application</h3>
                        <p>We begin with a detailed consultation to understand your goals, then guide you through the application process.</p>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">2</div>
                        <h3>Document Preparation & Embassy Coaching</h3>
                        <p>We help prepare all necessary documents and provide coaching for embassy interviews.</p>
                    </div>
                    
                    <div class="step">
                        <div class="step-number">3</div>
                        <h3>Visa Approval & Relocation Support</h3>
                        <p>After visa approval, we assist with travel arrangements, accommodation, and settling into your new country.</p>
                    </div>
                </div>
            </div>
        </section>

         <!-- Testimonials Section -->
<section class="section testimonials">
    <div class="container">
        <div class="section-title">
            <h2>Success Stories</h2>
            <p>Hear from our satisfied clients who have achieved their global dreams</p>
        </div>
        
        <div class="testimonials-container">
            <div class="testimonial">
                <p class="testimonial-text">"Global Immigration SC made my study abroad dream come true. Their guidance through the university application and visa process was invaluable. I'm now studying at the University of Toronto with a 100% scholarship thanks to their expertise!"</p>
                <div class="testimonial-author">
                    <div class="author-image">
                        <img src="https://i.ibb.co/SXXJzhnT/Gemini-Generated-Image-l3odzyl3odzyl3od-1.png" alt="Fatima Adebayo - Student at University of Toronto" onerror="this.onerror=null; this.style.display='none'; this.parentElement.innerHTML='FA';">
                    </div>
                    <div class="author-details">
                        <h4>Fatima Adebayo</h4>
                        <p>Student at University of Toronto, Canada</p>
                    </div>
                </div>
            </div>
            
            <div class="testimonial">
                <p class="testimonial-text">"The team at Global Immigration SC provided exceptional support with my work visa application. Their attention to detail and knowledge of the process made everything smooth and stress-free. I received my Australian work visa in just 6 weeks!"</p>
                <div class="testimonial-author">
                    <div class="author-image">
                        <img src="https://i.ibb.co/GvkTSGNw/Gemini-Generated-Image-3zry3q3zry3q3zry.png" alt="Kwame Osei - Software Engineer in Australia" onerror="this.onerror=null; this.style.display='none'; this.parentElement.innerHTML='KO';">
                    </div>
                    <div class="author-details">
                        <h4>Sarah Okoro</h4>
                        <p>Software Engineer in Sydney, Australia</p>
                    </div>
                </div>
            </div>

            <div class="testimonial">
                <p class="testimonial-text">"As a Liberian student, I was worried about the visa process. Global Immigration SC guided me through every step and helped me secure my UK student visa on the first attempt. I'm now pursuing my Master's at London School of Economics!"</p>
                <div class="testimonial-author">
                    <div class="author-image">
                        <img src="https://i.ibb.co/WWLWR3HC/Gemini-Generated-Image-usumlgusumlgusum.png" alt="Sarah Okoro - Graduate Student at LSE" onerror="this.onerror=null; this.style.display='none'; this.parentElement.innerHTML='SO';">
                    </div>
                    <div class="author-details">
                        <h4>Richard Kollie</h4>
                        <p>Graduate Student at LSE, UK</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


        <!-- Blog Preview Section -->
        <section id="blog" class="section blog-preview">
            <div class="container">
                <div class="section-title">
                    <h2>Latest From Our Blog</h2>
                    <p>Helpful resources and updates on immigration policies and study abroad opportunities</p>
                </div>
                
                <div class="blog-grid" id="dynamic-blog-container">
                    <!-- Blog posts will be dynamically loaded here from localStorage -->
                </div>
                
                <div style="text-align: center; margin-top: 40px;">
                    <a href="https://www.facebook.com/share/16ZuMVLV3g/?mibextid=wwXIfr" class="btn btn-primary" target="_blank" rel="noopener noreferrer">View All Posts on Facebook</a>
                </div>
            </div>
        </section>

        <!-- Founder Section -->
<section class="section founder">
    <div class="container">
        <div class="founder-container">
            <div class="founder-image">
                <img src="https://i.ibb.co/4RHYCswn/Founder.jpg" alt="Darlington F Tamba - Founder of Global Immigration SC">
            </div>
            <div class="founder-content">
                <h2>Message From Our Founder</h2>
                <h3>Darlington F Tamba</h3>
                <p>"At Global Immigration SC, we believe that everyone deserves the opportunity to pursue their dreams on a global stage. Our mission is to break down barriers and make international education and immigration accessible to all."</p>
                <p>"Having navigated the complex immigration process myself, I understand the challenges our clients face. That's why we've built a team of dedicated professionals who are committed to providing personalized guidance and support every step of the way."</p>
                <p>"Your success is our success. When you achieve your dreams of studying or working abroad, we celebrate with you. We're not just an immigration service  we're your partners in building a brighter future."</p>
                <div class="founder-signature">- Darlington F Tamba, Founder & CEO</div>
            </div>
        </div>
    </div>
</section>

        <!-- Team Section -->
        <section class="section team">
            <div class="container">
                <div class="section-title">
                    <h2>Meet Our Team</h2>
                    <p>Our dedicated professionals are committed to your success</p>
                </div>
                
                <div class="team-grid">
                    <div class="team-member">
                        <div class="team-image">
                            <div class="image-fallback">
                                <i class="fas fa-user-tie"></i>
                            </div>
                        </div>
                        <div class="team-details">
                            <h3 class="team-name">Stephen V. Shilue</h3>
                            <p class="team-position">Co-founder and Chief Operating Officer</p>
                            <p class="team-description">Experienced operations leader with expertise in international education and immigration processes.</p>
                        </div>
                    </div>
                    
                    <div class="team-member">
                        <div class="team-image">
                            <div class="image-fallback">
                                <i class="fas fa-user-graduate"></i>
                            </div>
                        </div>
                        <div class="team-details">
                            <h3 class="team-name">Jennifer Williams</h3>
                            <p class="team-position">International Applicants Observer</p>
                            <p class="team-description">Specializes in reviewing applications and ensuring compliance with international standards.</p>
                        </div>
                    </div>
                    
                    <div class="team-member">
                        <div class="team-image">
                            <div class="image-fallback">
                                <i class="fas fa-passport"></i>
                            </div>
                        </div>
                        <div class="team-details">
                            <h3 class="team-name">Sarah Johnson</h3>
                            <p class="team-position">Visa Review Consultant</p>
                            <p class="team-description">Expert in visa documentation and interview preparation with a 98% success rate.</p>
                        </div>
                    </div>
                    
                    <div class="team-member">
                        <div class="team-image">
                            <div class="image-fallback">
                                <i class="fas fa-globe-americas"></i>
                            </div>
                        </div>
                        <div class="team-details">
                            <h3 class="team-name">Emily Clark</h3>
                            <p class="team-position">International Consultant</p>
                            <p class="team-description">Provides guidance on study abroad programs and cultural adaptation for international students.</p>
                        </div>
                    </div>
                    
                    <div class="team-member">
                        <div class="team-image">
                            <div class="image-fallback">
                                <i class="fas fa-plane"></i>
                            </div>
                        </div>
                        <div class="team-details">
                            <h3 class="team-name">Michael Ojo</h3>
                            <p class="team-position">International Agent</p>
                            <p class="team-description">Specializes in African markets with extensive knowledge of visa processes for African students.</p>
                        </div>
                    </div>
                    
                    <div class="team-member">
                        <div class="team-image">
                            <div class="image-fallback">
                                <i class="fas fa-hands-helping"></i>
                            </div>
                        </div>
                        <div class="team-details">
                            <h3 class="team-name">David Chukwu</h3>
                            <p class="team-position">International Agent</p>
                            <p class="team-description">Focuses on student recruitment and scholarship opportunities for African applicants.</p>
                        </div>
                    </div>
                    
                    <div class="team-member">
                        <div class="team-image">
                            <div class="image-fallback">
                                <i class="fas fa-briefcase"></i>
                            </div>
                        </div>
                        <div class="team-details">
                            <h3 class="team-name">Robert Smith</h3>
                            <p class="team-position">International Agent</p>
                            <p class="team-description">Expert in work visas and immigration processes for professionals seeking opportunities abroad.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Newsletter Section -->
        <section class="section newsletter">
            <div class="container">
                <div class="section-title">
                    <h2>Stay Informed With Our Updates</h2>
                    <p>Subscribe to our newsletter for the latest immigration news, visa updates, and exclusive tips</p>
                </div>
                
                <div class="newsletter-content">
                    <form id="newsletterForm" class="newsletter-form" action="https://formspree.io/f/mrbaejkr" method="POST">
                        <input type="email" name="email" class="newsletter-input" placeholder="Enter your email address" required>
                        <input type="hidden" name="form_type" value="newsletter_subscription">
                        <button type="submit" class="btn btn-primary">Subscribe Now</button>
                    </form>
                    <p style="margin-top: 15px; color: var(--medium-gray); font-size: 0.9rem; text-align: center;">
                        We respect your privacy. You can unsubscribe at any time.
                    </p>
                </div>
                
                <div id="newsletterSuccess" class="form-success" style="display: none; margin-top: 20px;">
                    Thank you for subscribing! Please check your email to confirm your subscription.
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="section contact">
            <div class="container">
                <div class="section-title">
                    <h2>Contact Us</h2>
                    <p>Get in touch with our team for personalized immigration consultation</p>
                </div>
                
                <div class="contact-container">
                    <div class="contact-info">
                        <h3>Our Head Office</h3>
                        
                        <div class="contact-details">
                            <div class="contact-item">
                                <div class="contact-icon">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <div class="contact-text">
                                    Monrovia Liberia. P.O.BOX 1000 
                                </div>
                            </div>
                            
                            <div class="contact-item">
                                <div class="contact-icon">
                                    <i class="fas fa-phone-alt"></i>
                                </div>
                                <div class="contact-text">
                                    +231886590302<br>
                                    +231770562292<br>
                                    +231772876644
                                </div>
                            </div>
                            
                            <div class="contact-item">
                                <div class="contact-icon">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <div class="contact-text">
                                    ceo@globalimmigrationsclr.com<br>
                                    infoglobalimmigrationsc@gmail.com
                                </div>
                            </div>
                        </div>
                        
                        <div class="office-hours">
                            <h4>Office Hours</h4>
                            <table class="hours-table">
                                <tr>
                                    <td>Monday</td>
                                    <td>9:00 AM - 5:00 PM</td>
                                </tr>
                                <tr>
                                    <td>Tuesday</td>
                                    <td>9:00 AM - 5:00 PM</td>
                                </tr>
                                <tr>
                                    <td>Wednesday</td>
                                    <td>9:00 AM - 3:00 PM</td>
                                </tr>
                                <tr>
                                    <td>Thursday</td>
                                    <td>9:00 AM - 5:00 PM</td>
                                </tr>
                                <tr>
                                    <td>Friday</td>
                                    <td>9:00 AM - 5:00 PM</td>
                                </tr>
                                <tr>
                                    <td>Saturday</td>
                                    <td>Emergency Only</td>
                                </tr>
                            </table>
                        </div>
                        
                        <div class="hero-buttons" style="justify-content: flex-start; margin-top: 30px;">
                            <a href="https://www.google.com/maps/place/Monrovia,+Liberia" class="btn btn-primary" style="margin-right: 15px;">Visit Our Office</a>
                            <a href="https://wa.me/231886590302" class="btn btn-outline">Chat on WhatsApp</a>
                        </div>
                    </div>
                    
                    <div class="contact-form">
                        <h3>Send us a Message</h3>
                        <form id="inquiryForm" action="https://formspree.io/f/mrbaejkr" method="POST">
                            <div class="form-group">
                                <label for="name">Full Name *</label>
                                <input type="text" id="name" name="name" class="form-control" required>
                                <div class="form-error" id="nameError">Please enter your full name</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="email">Email Address *</label>
                                <input type="email" id="email" name="email" class="form-control" required>
                                <div class="form-error" id="emailError">Please enter a valid email address</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="phone">Phone Number *</label>
                                <input type="tel" id="phone" name="phone" class="form-control" required>
                                <div class="form-error" id="phoneError">Please enter a valid phone number</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="country">Country of Interest *</label>
                                <select id="country" name="country" class="form-control" required>
                                    <option value="">Select a country</option>
                                    <option value="usa">United States</option>
                                    <option value="canada">Canada</option>
                                    <option value="australia">Australia</option>
                                    <option value="germany">Germany</option>
                                    <option value="sweden">Sweden</option>
                                    <option value="switzerland">Switzerland</option>
                                    <option value="uae">UAE</option>
                                    <option value="other">Other</option>
                                </select>
                                <div class="form-error" id="countryError">Please select a country</div>
                            </div>
                            
                            <div class="form-group">
                                <label>I'm interested in: *</label>
                                <div style="display: flex; gap: 15px; margin-top: 8px;">
                                    <div style="display: flex; align-items: center; gap: 5px;">
                                        <input type="radio" id="study" name="interest" value="study" required>
                                        <label for="study" style="display: inline;">Study</label>
                                    </div>
                                    
                                    <div style="display: flex; align-items: center; gap: 5px;">
                                        <input type="radio" id="work" name="interest" value="work">
                                        <label for="work" style="display: inline;">Work</label>
                                    </div>
                                    
                                    <div style="display: flex; align-items; center; gap: 5px;">
                                        <input type="radio" id="travel" name="interest" value="travel">
                                        <label for="travel" style="display: inline;">Travel</label>
                                    </div>
                                </div>
                                <div class="form-error" id="interestError">Please select an option</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="message">Message *</label>
                                <textarea id="message" name="message" class="form-control" required></textarea>
                                <div class="form-error" id="messageError">Please enter your message</div>
                            </div>
                            
                            <input type="hidden" name="form_type" value="contact_form">
                            
                            <button type="submit" class="btn btn-primary" style="width: 100%;">
                                <span class="btn-text">Submit Inquiry</span>
                                <span class="loading-spinner" style="display: none;"></span>
                            </button>
                            
                            <div id="formSuccess" class="form-success">
                                Thank you for your inquiry! We will contact you shortly.
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-container">
                <div class="footer-col">
                    <h3>Global Immigration SC</h3>
                    <p>Your trusted partner for immigration and study abroad solutions. We're committed to making your global dreams a reality.</p>
                    <p>Sponsored by <strong>Motiva Corporation Group of Companies</strong></p>
                </div>
                
                <div class="footer-col">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#home">Home</a></li>
                        <li><a href="#about">About Us</a></li>
                        <li><a href="#services">Services</a></li>
                        <li><a href="#destinations">Destinations</a></li>
                        <li><a href="#blog">Blog</a></li>
                        <li><a href="#application-portal">Application Portal</a></li>
                        <li><a href="#contact">Contact Us</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h3>Services</h3>
                    <ul class="footer-links">
                        <li><a href="#">Study Abroad</a></li>
                        <li><a href="#">Visa Application</a></li>
                        <li><a href="#">Work Immigration</a></li>
                        <li><a href="#">Travel Arrangements</a></li>
                        <li><a href="#">Relocation Support</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h3>Connect With Us</h3>
                    <div class="social-links">
                        <a href="https://www.facebook.com/share/1CT6ZQ1p5S/?mibextid=wwXIfr" target="_blank" rel="noopener noreferrer" aria-label="Follow us on Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://www.instagram.com/globalimmigrationsc/" target="_blank" rel="noopener noreferrer" aria-label="Follow us on Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="https://wa.me/231886590302" target="_blank" rel="noopener noreferrer" aria-label="Chat with us on WhatsApp"><i class="fab fa-whatsapp"></i></a>
                        <a href="https://www.linkedin.com/company/global-immigration-sc" target="_blank" rel="noopener noreferrer" aria-label="Follow us on LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                    <div class="qr-code">
                        <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://www.facebook.com/share/16ZuMVLV3g/?mibextid=wwXIfr" alt="QR Code for Global Immigration SC Facebook Page">
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="footer-tagline">
                    <p>Your Global Journey Starts Here </p>
                </div>
                <p>&copy; 2023 Global Immigration SC. All rights reserved. Sponsored by Motiva Corporation Group of Companies.</p>
            </div>
        </div>
    </footer>

    <!-- WhatsApp Float -->
    <a href="https://wa.me/231886590302" class="whatsapp-float" target="_blank" rel="noopener noreferrer" aria-label="Chat with us on WhatsApp">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Dashboard (hidden by default) -->
    <div id="dashboard" class="dashboard" style="display: none;">
        <div class="dashboard-header">
            <div class="container">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h2>Applicant Dashboard</h2>
                    <div>
                        <span id="userName" style="margin-right: 15px;">Welcome, User</span>
                        <button id="logoutBtn" class="btn btn-outline">Logout</button>
                        <button id="adminAccessBtn" class="btn btn-primary" style="margin-left: 10px; display: none;">Admin Access</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="container dashboard-container">
            <div class="dashboard-sidebar">
                <ul class="sidebar-menu">
                    <li><a href="#overview" class="sidebar-link active" data-section="overview">Application Overview</a></li>
                    <li><a href="#documents" class="sidebar-link" data-section="documents">Document Upload</a></li>
                    <li><a href="#payments" class="sidebar-link" data-section="payments">Payment Status</a></li>
                    <li><a href="#profile" class="sidebar-link" data-section="profile">Profile Management</a></li>
                    <li><a href="#status" class="sidebar-link" data-section="status">Application Status</a></li>
                </ul>
            </div>
            
            <div class="dashboard-content">
                <div id="overview" class="dashboard-section active">
                    <h3>Application Overview</h3>
                    <p>Track your application progress and see what's next in your immigration journey.</p>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" id="mainProgressBar" style="width: 0%;"></div>
                    </div>
                    <p style="text-align: center; font-weight: 600;" id="progressPercentage">0% Complete</p>
                    
                    <div class="progress-steps">
                        <div class="progress-step">
                            <div class="step-indicator" id="step1">1</div>
                            <p>Initial Application</p>
                        </div>
                        <div class="progress-step">
                            <div class="step-indicator" id="step2">2</div>
                            <p>Document Submission</p>
                        </div>
                        <div class="progress-step">
                            <div class="step-indicator" id="step3">3</div>
                            <p>Payment Processing</p>
                        </div>
                        <div class="progress-step">
                            <div class="step-indicator" id="step4">4</div>
                            <p>Review & Approval</p>
                        </div>
                        <div class="progress-step">
                            <div class="step-indicator" id="step5">5</div>
                            <p>Visa Issued</p>
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <h4>Next Steps</h4>
                        <ul style="list-style-type: disc; margin-left: 20px;" id="nextStepsList">
                            <li>Complete your profile information</li>
                            <li>Upload required documents</li>
                            <li>Complete payment for application processing</li>
                        </ul>
                    </div>
                </div>
                
                <div id="documents" class="dashboard-section">
                    <h3>Document Upload & Management</h3>
                    <p>Upload and manage all required documents for your application.</p>
                    
                    <div class="documents-grid">
                        <div class="document-card" data-doc-type="passport">
                            <h4>Passport Copy</h4>
                            <p>Upload a clear copy of your passport information page</p>
                            <div class="document-status status-pending" id="passportStatus">Pending</div>
                            <div class="upload-area" data-doc-type="passport">
                                <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; margin-bottom: 10px;"></i>
                                <p>Click or drag file to upload</p>
                                <input type="file" id="passportUpload" accept=".pdf,.jpg,.jpeg,.png" style="display: none;">
                                <div class="upload-progress">
                                    <div class="upload-progress-bar" id="passportProgress"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="document-card" data-doc-type="academic_transcripts">
                            <h4>Academic Transcripts</h4>
                            <p>Upload your academic records and certificates</p>
                            <div class="document-status status-pending" id="transcriptsStatus">Pending</div>
                            <div class="upload-area" data-doc-type="academic_transcripts">
                                <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; margin-bottom: 10px;"></i>
                                <p>Click or drag file to upload</p>
                                <input type="file" id="transcriptsUpload" accept=".pdf,.jpg,.jpeg,.png" style="display: none;">
                                <div class="upload-progress">
                                    <div class="upload-progress-bar" id="transcriptsProgress"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="document-card" data-doc-type="proof_of_funds">
                            <h4>Proof of Funds</h4>
                            <p>Bank statements or sponsorship letters</p>
                            <div class="document-status status-pending" id="fundsStatus">Pending</div>
                            <div class="upload-area" data-doc-type="proof_of_funds">
                                <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; margin-bottom: 10px;"></i>
                                <p>Click or drag file to upload</p>
                                <input type="file" id="fundsUpload" accept=".pdf,.jpg,.jpeg,.png" style="display: none;">
                                <div class="upload-progress">
                                    <div class="upload-progress-bar" id="fundsProgress"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="document-card" data-doc-type="recommendation_letter">
                            <h4>Letter of Recommendation</h4>
                            <p>Professional or academic recommendation letters</p>
                            <div class="document-status status-pending" id="recommendationStatus">Pending</div>
                            <div class="upload-area" data-doc-type="recommendation_letter">
                                <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; margin-bottom: 10px;"></i>
                                <p>Click or drag file to upload</p>
                                <input type="file" id="recommendationUpload" accept=".pdf,.jpg,.jpeg,.png" style="display: none;">
                                <div class="upload-progress">
                                    <div class="upload-progress-bar" id="recommendationProgress"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="payments" class="dashboard-section">
                    <h3>Payment Status & History</h3>
                    <p>View your payment records and transaction history.</p>
                    
                    <table class="payment-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Description</th>
                                <th>Amount</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2023-10-15</td>
                                <td>Application Fee</td>
                                <td>$150.00</td>
                                <td><span class="payment-status status-completed">Completed</span></td>
                            </tr>
                            <tr>
                                <td>2023-10-20</td>
                                <td>Document Processing</td>
                                <td>$75.00</td>
                                <td><span class="payment-status status-pending">Pending</span></td>
                            </tr>
                            <tr>
                                <td>2023-10-25</td>
                                <td>Visa Processing Fee</td>
                                <td>$200.00</td>
                                <td><span class="payment-status status-pending">Pending</span></td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div style="margin-top: 30px;">
                        <h4>Outstanding Payments</h4>
                        <p>You have <strong>$275.00</strong> in outstanding payments.</p>
                        <button class="btn btn-primary" style="margin-top: 15px;">Make Payment</button>
                    </div>
                </div>
                
                <div id="profile" class="dashboard-section">
    <h3>Profile Management</h3>
    <p>Update your personal details and account information.</p>
    
    <form class="profile-form">
        <div class="form-group">
            <label for="dashboardName">Full Name</label>
            <input type="text" id="dashboardName" class="form-control" value="John Doe">
        </div>
        
        <div class="form-group">
            <label for="dashboardEmail">Email Address</label>
            <input type="email" id="dashboardEmail" class="form-control" value="john.doe@example.com">
        </div>
        
        <div class="form-group">
            <label for="dashboardPhone">Phone Number</label>
            <input type="tel" id="dashboardPhone" class="form-control" value="+1234567890">
        </div>
        
        <div class="form-group">
            <label for="dashboardAddress">Address</label>
            <textarea id="dashboardAddress" class="form-control">123 Main Street, Monrovia, Liberia</textarea>
        </div>
        
        <div class="form-group">
            <label for="dashboardCountry">Country of Interest</label>
            <select id="dashboardCountry" class="form-control">
                <option value="">Select your desired country</option>
                <option value="usa">United States</option>
                <option value="canada" selected>Canada</option>
                <option value="australia">Australia</option>
                <option value="uk">United Kingdom</option>
                <option value="germany">Germany</option>
                <option value="france">France</option>
                <option value="netherlands">Netherlands</option>
                <option value="sweden">Sweden</option>
                <option value="norway">Norway</option>
                <option value="denmark">Denmark</option>
                <option value="switzerland">Switzerland</option>
                <option value="austria">Austria</option>
                <option value="ireland">Ireland</option>
                <option value="newzealand">New Zealand</option>
                <option value="singapore">Singapore</option>
                <option value="japan">Japan</option>
                <option value="southkorea">South Korea</option>
                <option value="uae">United Arab Emirates</option>
                <option value="qatar">Qatar</option>
                <option value="saudiarabia">Saudi Arabia</option>
                <option value="other">Other Country</option>
            </select>
        </div>
        
        <button type="button" class="btn btn-primary" onclick="handleProfileUpdate(event)">Update Profile</button>
    </form>
    
    <div style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
        <h4>Change Password</h4>
        <form class="password-form">
            <div class="form-group">
                <label for="currentPassword">Current Password</label>
                <input type="password" id="currentPassword" class="form-control">
            </div>
            
            <div class="form-group">
                <label for="newPassword">New Password</label>
                <input type="password" id="newPassword" class="form-control">
            </div>
            
            <div class="form-group">
                <label for="confirmNewPassword">Confirm New Password</label>
                <input type="password" id="confirmNewPassword" class="form-control">
            </div>
            
            <button type="button" class="btn btn-outline" onclick="handlePasswordChange(event)">Change Password</button>
        </form>
    </div>
</div>
                
                <div id="status" class="dashboard-section">
                    <h3>Application Status Tracking</h3>
                    <p>Track the current status of your application with our visual timeline.</p>
                    
                    <div style="margin: 30px 0;">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 40%;"></div>
                        </div>
                        <p style="text-align: center; font-weight: 600; margin-top: 10px;">Application Status: Document Submission Phase</p>
                    </div>
                    
                    <div style="position: relative; margin: 40px 0;">
                        <div style="position: absolute; left: 0; top: 0; bottom: 0; width: 2px; background-color: var(--primary-red);"></div>
                        
                        <div style="position: relative; padding-left: 30px; margin-bottom: 30px;">
                            <div style="position: absolute; left: 0; top: 0; width: 20px; height: 20px; border-radius: 50%; background-color: var(--primary-red);"></div>
                            <h4 style="margin-bottom: 5px;">Application Submitted</h4>
                            <p style="color: var(--medium-gray);">October 15, 2023</p>
                            <p>Your initial application has been received and is under review.</p>
                        </div>
                        
                        <div style="position: relative; padding-left: 30px; margin-bottom: 30px;">
                            <div style="position: absolute; left: 0; top: 0; width: 20px; height: 20px; border-radius: 50%; background-color: var(--primary-red);"></div>
                            <h4 style="margin-bottom: 5px;">Document Review</h4>
                            <p style="color: var(--medium-gray);">Current Step</p>
                            <p>We are currently reviewing your submitted documents. Please ensure all required documents are uploaded.</p>
                        </div>
                        
                        <div style="position: relative; padding-left: 30px; margin-bottom: 30px;">
                            <div style="position: absolute; left: 0; top: 0; width: 20px; height: 20px; border-radius: 50%; background-color: #eee;"></div>
                            <h4 style="margin-bottom: 5px;">Payment Processing</h4>
                            <p style="color: var(--medium-gray);">Upcoming</p>
                            <p>Once documents are approved, you'll need to complete payment for processing fees.</p>
                        </div>
                        
                        <div style="position: relative; padding-left: 30px; margin-bottom: 30px;">
                            <div style="position: absolute; left: 0; top: 0; width: 20px; height: 20px; border-radius: 50%; background-color: #eee;"></div>
                            <h4 style="margin-bottom: 5px;">Embassy Submission</h4>
                            <p style="color: var(--medium-gray);">Upcoming</p>
                            <p>Your application will be submitted to the appropriate embassy for final review.</p>
                        </div>
                        
                        <div style="position: relative; padding-left: 30px;">
                            <div style="position: absolute; left: 0; top: 0; width: 20px; height: 20px; border-radius: 50%; background-color: #eee;"></div>
                            <h4 style="margin-bottom: 5px;">Visa Issuance</h4>
                            <p style="color: var(--medium-gray);">Final Step</p>
                            <p>Upon approval, your visa will be issued and prepared for collection.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard (hidden by default) -->
    <div id="adminDashboard" class="admin-dashboard" style="display: none;">
        <div class="admin-header">
            <div class="container">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h2>Admin Dashboard - Applicant Management</h2>
                    <div>
                        <span id="adminUser" style="margin-right: 15px;"></span>
                        <button id="adminLogout" class="btn btn-outline">Logout</button>
                        <button id="backToUser" class="btn btn-primary" style="margin-left: 10px;">User View</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="container" style="padding-top: 20px;">
            <div class="dashboard-container">
                <div class="dashboard-sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#adminOverview" class="sidebar-link active" data-section="adminOverview">Overview</a></li>
                        <li><a href="#applicantManagement" class="sidebar-link" data-section="applicantManagement">Applicants</a></li>
                        <li><a href="#documentReview" class="sidebar-link" data-section="documentReview">Document Review</a></li>
                        <li><a href="#paymentManagement" class="sidebar-link" data-section="paymentManagement">Payments</a></li>
                    </ul>
                </div>
                
                <div class="dashboard-content">
                    <div id="adminOverview" class="dashboard-section active">
                        <h3>System Overview</h3>
                        <div class="stats-container" style="margin-top: 20px;">
                            <div class="stat-item">
                                <div class="stat-number" id="totalApplicants">0</div>
                                <div class="stat-label">Total Applicants</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="pendingReview">0</div>
                                <div class="stat-label">Pending Review</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="approvedApps">0</div>
                                <div class="stat-label">Approved</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-number" id="rejectedApps">0</div>
                                <div class="stat-label">Rejected</div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="applicantManagement" class="dashboard-section">
                        <h3>Applicant Management</h3>
                        <div class="form-group">
                            <input type="text" id="searchApplicants" class="form-control" placeholder="Search applicants...">
                        </div>
                        <div id="applicantsList">
                            <!-- Applicants will be loaded here dynamically -->
                        </div>
                    </div>
                    
                    <div id="applicantDetail" class="dashboard-section">
                        <h3>Applicant Details</h3>
                        <div id="applicantDetailContent">
                            <!-- Applicant details will be loaded here -->
                        </div>
                    </div>
                    
                    <div id="documentReview" class="dashboard-section">
                        <h3>Document Review</h3>
                        <div id="documentReviewList">
                            <!-- Documents for review will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>

    <!-- Load Firebase Configuration from external file -->
<script src="config.js"></script>

<script>
    // Initialize Firebase with fallback
console.log(' Initializing Firebase...');

try {
    // Check if config exists
    if (typeof firebaseConfig !== 'undefined') {
        firebase.initializeApp(firebaseConfig);
        console.log(' Firebase initialized successfully');
        
        // Initialize Firebase services
        const auth = firebase.auth();
        const db = firebase.firestore();
        const storage = firebase.storage();
        
        console.log(' Firebase services ready');
    } else {
        console.log(' Firebase config not found, continuing without Firebase');
        // Set dummy values to prevent errors
        window.auth = { onAuthStateChanged: (cb) => cb(null) };
        window.db = { collection: () => ({ doc: () => ({ get: () => Promise.resolve({ exists: false }) }) }) };
    }
} catch (error) {
    console.error(' Firebase initialization error:', error);
    console.log(' Continuing without Firebase features');
}
</script>

<script>
// Security validation functions
function sanitizeInput(input) {
    const div = document.createElement('div');
    div.textContent = input;
    return div.innerHTML;
}

function validateEmail(email) {
    const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return re.test(String(email).toLowerCase());
}

function validatePhone(phone) {
    const re = /^[\+]?[1-9][\d]{0,15}$/;
    return re.test(phone.replace(/[\s\-\(\)]/g, ''));
}

function validateFileType(file, allowedTypes) {
    const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
    return allowedTypes.includes(fileExtension);
}

function validateFileSize(file, maxSizeMB) {
    return file.size <= maxSizeMB * 1024 * 1024;
}

// Enhanced admin access verification
async function verifyAdminAccess() {
    if (!currentUser) {
        throw new Error('User not authenticated');
    }
    
    const userDoc = await db.collection('users').doc(currentUser.uid).get();
    if (!userDoc.exists || userDoc.data().userType !== 'admin') {
        throw new Error('Unauthorized admin access attempt');
    }
    
    return true;
}

console.log(' Security functions loaded');
</script>

<script>
// Enhanced admin dashboard with delete functionality
function enhanceAdminDashboard() {
    console.log(' Enhancing admin dashboard with delete functionality...');
    
    // Add delete functionality to applicants list
    addDeleteFunctionality();
    
    // Add bulk delete options
    addBulkDeleteOptions();
    
    // Setup real-time updates that include delete buttons
    setupAdminRealTimeWithDelete();
}

// Delete applicant function
async function deleteApplicant(userId, userName) {
    if (!confirm(` ARE YOU SURE?\n\nYou are about to delete applicant:\n${userName}\n\nThis will permanently remove:\n User account\n Application data\n Uploaded documents\n\nThis action cannot be undone!`)) {
        return;
    }
    
    try {
        console.log(` Deleting applicant: ${userName} (${userId})`);
        
        // 1. Delete application data
        await firebase.firestore().collection('applications').doc(userId).delete();
        console.log(' Application data deleted');
        
        // 2. Delete user profile
        await firebase.firestore().collection('users').doc(userId).delete();
        console.log(' User profile deleted');
        
        // 3. Delete uploaded documents from storage
        try {
            const storageRef = firebase.storage().ref();
            const userFilesRef = storageRef.child(userId);
            const files = await userFilesRef.listAll();
            
            const deletePromises = files.items.map(fileRef => fileRef.delete());
            await Promise.all(deletePromises);
            console.log(` Deleted ${files.items.length} uploaded files`);
        } catch (storageError) {
            console.log(' Could not delete storage files:', storageError.message);
        }
        
        alert(` Successfully deleted applicant: ${userName}`);
        console.log(` Applicant ${userName} completely removed from system`);
        
        // Refresh the applicants list
        addDeleteFunctionality();
        
    } catch (error) {
        console.log(' Error deleting applicant:', error);
        alert('Error deleting applicant: ' + error.message);
    }
}

// View applicant details
async function viewApplicantDetails(userId) {
    const appDoc = await firebase.firestore().collection('applications').doc(userId).get();
    const userDoc = await firebase.firestore().collection('users').doc(userId).get();
    
    const appData = appDoc.data();
    const userData = userDoc.data();
    
    const detailHTML = `
        <h3>Applicant Details</h3>
        <div style="background: #f9f9f9; padding: 20px; border-radius: 8px; margin-bottom: 15px;">
            <p><strong>Name:</strong> ${userData?.name || 'Unknown'}</p>
            <p><strong>Email:</strong> ${userData?.email || 'No email'}</p>
            <p><strong>User ID:</strong> ${userId}</p>
            <p><strong>Status:</strong> ${appData?.status || 'unknown'}</p>
            <p><strong>Progress:</strong> ${appData?.progress || 0}%</p>
            <p><strong>Country:</strong> ${appData?.personalInfo?.country || 'Not specified'}</p>
            <p><strong>Documents Uploaded:</strong> ${Object.keys(appData?.documents || {}).length}</p>
            <p><strong>Application Date:</strong> ${appData?.createdAt?.toDate?.().toLocaleDateString() || 'Unknown'}</p>
        </div>
        <button onclick="deleteApplicant('${userId}', '${userData?.name || 'Unknown'}')" class="btn" style="background: #e74c3c; color: white; width: 100%;">Delete This Applicant</button>
    `;
    
    // Create a modal to show details
    const modal = document.createElement('div');
    modal.style.position = 'fixed';
    modal.style.top = '0';
    modal.style.left = '0';
    modal.style.width = '100%';
    modal.style.height = '100%';
    modal.style.backgroundColor = 'rgba(0,0,0,0.7)';
    modal.style.display = 'flex';
    modal.style.justifyContent = 'center';
    modal.style.alignItems = 'center';
    modal.style.zIndex = '10000';
    
    modal.innerHTML = `
        <div style="background: white; padding: 30px; border-radius: 8px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 style="margin: 0;">Applicant Details</h3>
                <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
            </div>
            ${detailHTML}
        </div>
    `;
    
    document.body.appendChild(modal);
}

// Add delete functionality to admin dashboard
function addDeleteFunctionality() {
    console.log(' Adding delete functionality to admin dashboard...');
    
    const setupEnhancedApplicantsList = async () => {
        const applicationsSnapshot = await firebase.firestore().collection('applications').get();
        const container = document.getElementById('applicantsList');
        
        if (!container) {
            console.log(' Could not find applicants list container');
            return;
        }
        
        container.innerHTML = '';
        
        for (const doc of applicationsSnapshot.docs) {
            const appData = doc.data();
            const userDoc = await firebase.firestore().collection('users').doc(appData.userId).get();
            const userData = userDoc.data();
            
            const card = document.createElement('div');
            card.className = 'applicant-card';
            card.style.position = 'relative';
            
            card.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div style="flex: 2;">
                        <h4 style="margin: 0 0 5px 0;">${userData?.name || 'Unknown User'}</h4>
                        <p style="margin: 0 0 3px 0; color: #666;">${userData?.email || 'No email'}</p>
                        <p style="margin: 0 0 3px 0; font-size: 0.9em;">User ID: ${appData.userId.substring(0, 8)}...</p>
                    </div>
                    <div style="text-align: right;">
                        <span class="status-badge status-${appData.status}" style="display: inline-block; margin-bottom: 5px;">
                            ${appData.status.toUpperCase()}
                        </span>
                        <div style="font-size: 0.9em;">${appData.createdAt?.toDate?.().toLocaleDateString() || 'Unknown date'}</div>
                    </div>
                </div>
                <div style="margin-top: 10px; display: flex; gap: 10px; justify-content: flex-end;">
                    <button onclick="viewApplicantDetails('${appData.userId}')" class="btn btn-primary btn-small">View</button>
                    <button onclick="deleteApplicant('${appData.userId}', '${userData?.name || 'Unknown'}')" class="btn btn-outline btn-small" style="background: #e74c3c; color: white; border-color: #e74c3c;">Delete</button>
                </div>
            `;
            
            container.appendChild(card);
        }
        
        console.log(' Delete buttons added to all applicants');
    };
    
    setupEnhancedApplicantsList();
}

// Bulk delete options
function addBulkDeleteOptions() {
    console.log(' Adding bulk delete options...');
    
    const overviewSection = document.getElementById('adminOverview');
    if (overviewSection) {
        const bulkSection = document.createElement('div');
        bulkSection.style.marginTop = '30px';
        bulkSection.style.padding = '20px';
        bulkSection.style.background = '#fff3f3';
        bulkSection.style.borderRadius = '8px';
        bulkSection.style.border = '2px solid #e74c3c';
        
        bulkSection.innerHTML = `
            <h4 style="color: #e74c3c; margin-top: 0;"> Bulk Delete Operations</h4>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button onclick="deleteRejectedApplicants()" class="btn" style="background: #e74c3c; color: white;">
                     Delete All Rejected
                </button>
                <button onclick="deleteByStatus('draft')" class="btn" style="background: #f39c12; color: white;">
                     Delete Drafts
                </button>
            </div>
            <p style="margin-top: 10px; font-size: 0.9em; color: #666;">
                 These actions are permanent and cannot be undone!
            </p>
        `;
        
        overviewSection.appendChild(bulkSection);
    }
}

// Bulk delete functions
async function deleteRejectedApplicants() {
    if (!confirm(' DELETE ALL REJECTED APPLICANTS?\n\nThis will permanently remove ALL applicants with REJECTED status.\n\nThis action cannot be undone!')) {
        return;
    }
    
    try {
        const rejectedSnapshot = await firebase.firestore().collection('applications')
            .where('status', '==', 'rejected')
            .get();
        
        if (rejectedSnapshot.empty) {
            alert('No rejected applicants found!');
            return;
        }
        
        let deletedCount = 0;
        
        for (const doc of rejectedSnapshot.docs) {
            const appData = doc.data();
            const userDoc = await firebase.firestore().collection('users').doc(appData.userId).get();
            const userData = userDoc.data();
            
            await firebase.firestore().collection('applications').doc(appData.userId).delete();
            await firebase.firestore().collection('users').doc(appData.userId).delete();
            
            deletedCount++;
            console.log(` Deleted rejected applicant: ${userData?.name}`);
        }
        
        alert(` Successfully deleted ${deletedCount} rejected applicants`);
        addDeleteFunctionality();
        
    } catch (error) {
        console.log('Error:', error);
        alert('Error deleting rejected applicants: ' + error.message);
    }
}

async function deleteByStatus(status) {
    if (!confirm(` DELETE ALL APPLICANTS WITH STATUS: ${status.toUpperCase()}?\n\nThis action cannot be undone!`)) {
        return;
    }
    
    try {
        const snapshot = await firebase.firestore().collection('applications')
            .where('status', '==', status)
            .get();
        
        if (snapshot.empty) {
            alert(`No applicants found with status: ${status}`);
            return;
        }
        
        let deletedCount = 0;
        
        for (const doc of snapshot.docs) {
            const appData = doc.data();
            await firebase.firestore().collection('applications').doc(appData.userId).delete();
            await firebase.firestore().collection('users').doc(appData.userId).delete();
            deletedCount++;
        }
        
        alert(` Successfully deleted ${deletedCount} applicants with status: ${status}`);
        addDeleteFunctionality();
        
    } catch (error) {
        console.log('Error:', error);
        alert('Error deleting applicants: ' + error.message);
    }
}

// Real-time updates with delete functionality
function setupAdminRealTimeWithDelete() {
    console.log(' Setting up real-time admin updates with delete...');
    
    firebase.firestore().collection('applications')
        .onSnapshot((snapshot) => {
            console.log(' Application data changed, refreshing with delete buttons...');
            addDeleteFunctionality(); // This will refresh the list with delete buttons
        });
}

        // Application State Management
        let currentUser = null;
        let userApplication = null;
        let realTimeListener = null;
        let isAdmin = false;

        // Profile Management Functions
function handleProfileUpdate(event) {
    event.preventDefault();
    
    const name = document.getElementById('dashboardName').value;
    const email = document.getElementById('dashboardEmail').value;
    const phone = document.getElementById('dashboardPhone').value;
    const address = document.getElementById('dashboardAddress').value;
    const country = document.getElementById('dashboardCountry').value;
    
    if (!currentUser) {
        alert('Please log in to update your profile.');
        return;
    }
    
    // Show loading state
    const button = event.target;
    const originalText = button.textContent;
    button.textContent = 'Updating...';
    button.disabled = true;
    
    // First, check if user document exists
    const userRef = db.collection('users').doc(currentUser.uid);
    
    userRef.get().then((doc) => {
        if (doc.exists) {
            // Document exists, update it
            return userRef.update({
                name: name,
                email: email,
                phone: phone,
                address: address,
                country: country,
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            });
        } else {
            // Document doesn't exist, create it
            return userRef.set({
                name: name,
                email: email,
                phone: phone,
                address: address,
                country: country,
                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                userType: 'applicant'
            });
        }
    })
    .then(() => {
        // Now update application personal info
        const appRef = db.collection('applications').doc(currentUser.uid);
        
        return appRef.get().then((doc) => {
            if (doc.exists) {
                // Application exists, update it
                return appRef.update({
                    'personalInfo.name': name,
                    'personalInfo.phone': phone,
                    'personalInfo.address': address,
                    'personalInfo.country': country,
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                });
            } else {
                // Application doesn't exist, create it with basic structure
                return appRef.set({
                    userId: currentUser.uid,
                    status: 'draft',
                    progress: 0,
                    currentStep: 'personal_info',
                    personalInfo: {
                        name: name,
                        phone: phone,
                        address: address,
                        country: country
                    },
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                    documents: {},
                    payments: [],
                    applicationStages: {
                        personal_info: { status: 'completed', completed: true },
                        document_upload: { status: 'pending', completed: false },
                        payment: { status: 'pending', completed: false },
                        review: { status: 'pending', completed: false },
                        approval: { status: 'pending', completed: false }
                    }
                });
            }
        });
    })
    .then(() => {
        alert('Profile updated successfully!');
        // Update application stages
        updateApplicationStage('personal_info', true);
    })
    .catch((error) => {
        console.error('Error updating profile:', error);
        alert('Error updating profile: ' + error.message);
    })
    .finally(() => {
        // Reset button
        button.textContent = originalText;
        button.disabled = false;
    });
}

function handlePasswordChange(event) {
    event.preventDefault();
    
    const currentPassword = document.getElementById('currentPassword').value;
    const newPassword = document.getElementById('newPassword').value;
    const confirmPassword = document.getElementById('confirmNewPassword').value;
    
    if (!currentPassword || !newPassword || !confirmPassword) {
        alert('Please fill in all password fields.');
        return;
    }
    
    if (newPassword !== confirmPassword) {
        alert('New passwords do not match.');
        return;
    }
    
    if (newPassword.length < 6) {
        alert('New password must be at least 6 characters long.');
        return;
    }
    
    // Show loading state
    const button = event.target;
    const originalText = button.textContent;
    button.textContent = 'Changing Password...';
    button.disabled = true;
    
    // Reauthenticate user first
    const user = auth.currentUser;
    const credential = firebase.auth.EmailAuthProvider.credential(
        user.email, 
        currentPassword
    );
    
    user.reauthenticateWithCredential(credential)
        .then(() => {
            // Change password
            return user.updatePassword(newPassword);
        })
        .then(() => {
            alert('Password changed successfully!');
            // Clear form
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmNewPassword').value = '';
        })
        .catch((error) => {
            console.error('Error changing password:', error);
            if (error.code === 'auth/wrong-password') {
                alert('Current password is incorrect.');
            } else {
                alert('Error changing password: ' + error.message);
            }
        })
        .finally(() => {
            // Reset button
            button.textContent = originalText;
            button.disabled = false;
        });
}
<script>
// Enhanced Payment Confirmation System
function initializePaymentConfirmation() {
    const paymentsSection = document.getElementById('payments');
    if (!paymentsSection) return;
    
    // Remove existing payment confirmation if any
    const existingConfirmation = paymentsSection.querySelector('.payment-confirmation-section');
    if (existingConfirmation) {
        existingConfirmation.remove();
    }
    
    const confirmationHTML = `
        <div class="payment-confirmation-section" style="margin-top: 30px; border-top: 1px solid #eee; padding-top: 20px;">
            <h4> Payment Confirmation</h4>
            <p><strong>After making payment, confirm via:</strong></p>
            
            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 15px 0;">
                <div style="display: flex; gap: 15px; margin-bottom: 15px; flex-wrap: wrap;">
                    <button onclick="sendPaymentEmail()" class="btn" style="flex: 1; min-width: 120px; background: #ea4335; color: white;">
                        <i class="fas fa-envelope"></i> Email Proof
                    </button>
                    <button onclick="sendPaymentWhatsApp()" class="btn" style="flex: 1; min-width: 120px; background: #25D366; color: white;">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </button>
                    <button onclick="markPaymentAsSent()" class="btn" style="flex: 1; min-width: 120px; background: #E30613; color: white;">
                        <i class="fas fa-check"></i> Mark as Sent
                    </button>
                </div>
                
                <div style="font-size: 0.9rem; color: #666;">
                    <p><strong>Payment Methods:</strong></p>
                    <p> Orange Money: +231 770562292</p>
                    <p> Lonestar Money: +231 886590302</p>
                    <p> UBA Bank: 53080500327155</p>
                    <p><em>Account Name: Darlington Tamba</em></p>
                </div>
            </div>
        </div>
    `;
    
    paymentsSection.innerHTML += confirmationHTML;
}

function sendPaymentEmail() {
    const user = currentUser ? currentUser.uid : 'not_logged_in';
    const subject = `Payment Confirmation - User: ${user}`;
    const body = `Dear Global Immigration SC Team,

I have made the payment for my application. Please find the payment confirmation attached.

Application Details:
 User ID: ${user}
 Date: ${new Date().toLocaleDateString()}
 Payment Method: [Please specify]

Please confirm receipt of this payment.

Thank you,
Global Immigration SC Applicant`;

    window.location.href = `mailto:infoglobalimmigrationsc@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    trackPaymentAction('email');
}

function sendPaymentWhatsApp() {
    const user = currentUser ? currentUser.uid : 'not_logged_in';
    const message = ` Global Immigration SC - Payment Confirmation

User ID: ${user}
Date: ${new Date().toLocaleDateString()}

Hello! I have made the payment for my application. Please confirm receipt and provide further instructions.

Thank you!`;

    window.open(`https://wa.me/231886590302?text=${encodeURIComponent(message)}`, '_blank');
    trackPaymentAction('whatsapp');
}

async function markPaymentAsSent() {
    if (!currentUser) {
        alert('Please log in to mark payment as sent');
        return;
    }
    
    try {
        await db.collection('applications').doc(currentUser.uid).update({
            paymentStatus: 'proof_sent',
            paymentMethod: 'marked_by_user',
            paymentProofSentAt: firebase.firestore.FieldValue.serverTimestamp(),
            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        });
        
        alert(' Thank you! We will verify your payment and update your application status soon.');
        trackPaymentAction('marked');
        
    } catch (error) {
        alert('Error updating payment status: ' + error.message);
    }
}

async function trackPaymentAction(method) {
    if (!currentUser) return;
    
    try {
        await db.collection('applications').doc(currentUser.uid).update({
            [`payment.${method}At`]: firebase.firestore.FieldValue.serverTimestamp(),
            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        });
    } catch (error) {
        console.log('Payment tracking error:', error);
    }
}
</script>

function showPaymentInformation() {
    const paymentInfoHTML = `
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h3 style="color: var(--primary-red); margin-bottom: 15px;"> Payment Information  Global Immigration SC</h3>
            
            <p><strong>Dear Applicant,</strong></p>
            <p>To proceed with your application, please make your payment using any of the following options below </p>
            
            <div style="margin: 20px 0;">
                <h4>1 Mobile Money Payments</h4>
                <p> Orange Money: +231 770562292</p>
                <p> Lonestar Money: +231 886590302</p>
                <p><strong>Account Name: Darling Tamba</strong></p>
            </div>
            
            <div style="margin: 20px 0;">
                <h4>2 Bank Payment (UBA Liberia)</h4>
                <p> Account Name: Darlington Tamba</p>
                <p> Account Number: 53080500327155</p>
                <p>Bank: United Bank for Africa (UBA)</p>
            </div>
            
            <div style="background: #e8f5e8; padding: 15px; border-radius: 5px; margin: 20px 0;">
                <p><strong> After payment, kindly upload a screenshot or confirmation message to the upload confirmation section for verification:</strong></p>
                <p> +231 770562292 | +231 886590302</p>
                <p> Email: infoglobalimmigrationsc@gmail.com</p>
            </div>
            
            <p style="text-align: center; font-style: italic;">Thank you for choosing Global Immigration SC  your trusted partner for study, work, and travel abroad. </p>
        </div>
    `;
    
    // Create modal for payment information
    const modal = document.createElement('div');
    modal.style.position = 'fixed';
    modal.style.top = '0';
    modal.style.left = '0';
    modal.style.width = '100%';
    modal.style.height = '100%';
    modal.style.backgroundColor = 'rgba(0,0,0,0.7)';
    modal.style.display = 'flex';
    modal.style.justifyContent = 'center';
    modal.style.alignItems = 'center';
    modal.style.zIndex = '10000';
    
    modal.innerHTML = `
        <div style="background: white; padding: 30px; border-radius: 8px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 style="margin: 0; color: var(--primary-red);">Payment Instructions</h3>
                <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--primary-red);">&times;</button>
            </div>
            ${paymentInfoHTML}
            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="btn btn-primary" style="width: 100%; margin-top: 20px;">I Understand</button>
        </div>
    `;
    
    document.body.appendChild(modal);
}

async function handlePaymentConfirmationUpload(file) {
    if (!file || !currentUser) {
        alert('Please log in to upload payment confirmation.');
        return;
    }
    
    try {
        const uploadArea = document.getElementById('paymentConfirmationUpload');
        const statusElement = document.getElementById('paymentConfirmationStatus');
        
        // Store original state
        const originalHTML = uploadArea.innerHTML;
        
        // Show uploading state
        uploadArea.innerHTML = `
            <i class="fas fa-spinner fa-spin" style="font-size: 2rem; margin-bottom: 10px;"></i>
            <p>Uploading Payment Confirmation...</p>
            <div class="upload-progress">
                <div class="upload-progress-bar" style="width: 0%"></div>
            </div>
        `;
        
        // Get the NEW progress bar element
        const progressBar = uploadArea.querySelector('.upload-progress-bar');
        
        // Validate file type
        const validTypes = ['.pdf', '.jpg', '.jpeg', '.png'];
        if (!validateFileType(file, validTypes)) {
            alert('Please upload PDF, JPG, JPEG, or PNG files only.');
            uploadArea.innerHTML = originalHTML;
            reinitializePaymentUpload();
            return;
        }
        
        // Validate file size (10MB max)
        if (!validateFileSize(file, 10)) {
            alert('File size must be less than 10MB.');
            uploadArea.innerHTML = originalHTML;
            reinitializePaymentUpload();
            return;
        }
        
        // Create unique filename
        const fileName = `${currentUser.uid}/payment_confirmation_${Date.now()}_${file.name}`;
        const storageRef = storage.ref().child(fileName);
        
        // Upload file
        const uploadTask = storageRef.put(file);
        
        uploadTask.on('state_changed',
            (snapshot) => {
                const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                if (progressBar) {
                    progressBar.style.width = progress + '%';
                }
            },
            (error) => {
                console.error('Payment confirmation upload failed:', error);
                if (statusElement) {
                    statusElement.innerHTML = '<p style="color: red;">Upload failed. Please try again.</p>';
                }
                uploadArea.innerHTML = originalHTML;
                reinitializePaymentUpload();
            },
            async () => {
                try {
                    const downloadURL = await uploadTask.snapshot.ref.getDownloadURL();
                    
                    // Update application with payment confirmation
                    await db.collection('applications').doc(currentUser.uid).update({
                        paymentConfirmation: {
                            url: downloadURL,
                            fileName: file.name,
                            uploadedAt: firebase.firestore.FieldValue.serverTimestamp(),
                            status: 'pending_verification',
                            fileSize: file.size,
                            fileType: file.type
                        },
                        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    
                    // Show success
                    if (statusElement) {
                        statusElement.innerHTML = '<p style="color: green;"> Payment confirmation uploaded successfully! We will verify your payment shortly.</p>';
                    }
                    uploadArea.innerHTML = `
                        <i class="fas fa-check-circle" style="font-size: 2rem; margin-bottom: 10px; color: #4CAF50;"></i>
                        <p>Confirmation Uploaded!</p>
                        <p style="font-size: 0.8em; color: #666;">${file.name}</p>
                    `;
                    
                } catch (error) {
                    console.error('Error updating payment confirmation:', error);
                    if (statusElement) {
                        statusElement.innerHTML = '<p style="color: red;">Error saving confirmation. Please contact support.</p>';
                    }
                    uploadArea.innerHTML = originalHTML;
                    reinitializePaymentUpload();
                }
            }
        );
        
    } catch (error) {
        console.error('Payment confirmation upload error:', error);
        alert('Upload failed: ' + error.message);
        resetPaymentUploadArea();
    }
}

// Add this helper function
function reinitializePaymentUpload() {
    const uploadArea = document.getElementById('paymentConfirmationUpload');
    if (!uploadArea) return;
    
    uploadArea.innerHTML = `
        <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; margin-bottom: 10px;"></i>
        <p>Click or drag payment confirmation screenshot</p>
        <input type="file" id="paymentUploadInput" accept=".pdf,.jpg,.jpeg,.png" style="display: none;">
        <div class="upload-progress">
            <div class="upload-progress-bar" id="paymentProgress"></div>
        </div>
    `;
    
    // Re-attach event listeners
    const paymentFileInput = document.getElementById('paymentUploadInput');
    if (paymentFileInput) {
        uploadArea.addEventListener('click', () => paymentFileInput.click());
        paymentFileInput.addEventListener('change', (e) => {
            if (e.target.files[0]) {
                handlePaymentConfirmationUpload(e.target.files[0]);
            }
        });
    }
}

// Enhanced Payment History with Real-time Updates
function initializePaymentHistory() {
    // This will be called when the payments section is loaded
    loadPaymentHistory();
}

async function loadPaymentHistory() {
    if (!currentUser) return;
    
    try {
        const appDoc = await db.collection('applications').doc(currentUser.uid).get();
        const appData = appDoc.data();
        
        const payments = appData.payments || [
            { date: '2023-10-15', description: 'Application Fee', amount: 150.00, status: 'completed' },
            { date: '2023-10-20', description: 'Document Processing', amount: 75.00, status: 'pending' },
            { date: '2023-10-25', description: 'Visa Processing Fee', amount: 200.00, status: 'pending' }
        ];
        
        updatePaymentTable(payments);
        updateOutstandingPayments(payments);
        
    } catch (error) {
        console.error('Error loading payment history:', error);
    }
}

function updatePaymentTable(payments) {
    const tableBody = document.querySelector('.payment-table tbody');
    if (!tableBody) return;
    
    tableBody.innerHTML = payments.map(payment => `
        <tr>
            <td>${payment.date}</td>
            <td>${payment.description}</td>
            <td>$${payment.amount.toFixed(2)}</td>
            <td><span class="payment-status status-${payment.status}">${payment.status.toUpperCase()}</span></td>
        </tr>
    `).join('');
}

function updateOutstandingPayments(payments) {
    const outstandingSection = document.querySelector('#payments .dashboard-section').querySelector('div:last-child');
    if (!outstandingSection) return;
    
    const outstandingAmount = payments
        .filter(p => p.status === 'pending')
        .reduce((sum, payment) => sum + payment.amount, 0);
    
    outstandingSection.innerHTML = `
        <h4>Outstanding Payments</h4>
        <p>You have <strong>$${outstandingAmount.toFixed(2)}</strong> in outstanding payments.</p>
        <button class="btn btn-primary" style="margin-top: 15px;" onclick="showPaymentInformation()">Make Payment</button>
    `;
}

// Initialize all systems when dashboard is shown
function initializeDashboardSystems() {
    initializeDocumentUpload();
    initializeProfileManagement();
    initializePaymentConfirmation();
    initializePaymentHistory();
    updateDashboardUI();
}

// Profile Management Initialization
function initializeProfileManagement() {
    // This will be called to set up profile management
    loadUserProfile();
}

async function loadUserProfile() {
    if (!currentUser) return;
    
    try {
        const userDoc = await db.collection('users').doc(currentUser.uid).get();
        const appDoc = await db.collection('applications').doc(currentUser.uid).get();
        
        let userData = {};
        let appData = {};
        
        if (userDoc.exists) {
            userData = userDoc.data();
        }
        
        if (appDoc.exists) {
            appData = appDoc.data();
        }
        
        // Update profile form fields with existing data or defaults
        document.getElementById('dashboardName').value = userData.name || currentUser.displayName || '';
        document.getElementById('dashboardEmail').value = userData.email || currentUser.email || '';
        document.getElementById('dashboardPhone').value = userData.phone || '';
        document.getElementById('dashboardAddress').value = userData.address || '';
        document.getElementById('dashboardCountry').value = userData.country || appData?.personalInfo?.country || '';
        
    } catch (error) {
        console.error('Error loading user profile:', error);
    }
}

        // Enhanced Authentication System
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            await handleLogin();
        });

        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            await handleRegistration();
        });

        async function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            try {
                showLoadingState('loginForm', 'Logging in...');
                const userCredential = await auth.signInWithEmailAndPassword(email, password);
                currentUser = userCredential.user;
                await checkUserRole();
                await loadUserApplication();
                showDashboard();
            } catch (error) {
                alert('Login failed: ' + error.message);
                resetLoadingState('loginForm', 'Login');
            }
        }

        async function handleRegistration() {
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            try {
                showLoadingState('registerForm', 'Creating account...');
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                currentUser = userCredential.user;
                
                // Create user profile in Firestore
                await db.collection('users').doc(currentUser.uid).set({
                    name: name,
                    email: email,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    userType: 'applicant'
                });
                
                // Create initial application
                await initializeApplication();
                await loadUserApplication();
                showDashboard();
            } catch (error) {
                alert('Registration failed: ' + error.message);
                resetLoadingState('registerForm', 'Create Account');
            }
        }

        async function checkUserRole() {
            const userDoc = await db.collection('users').doc(currentUser.uid).get();
            if (userDoc.exists) {
                const userData = userDoc.data();
                isAdmin = userData.userType === 'admin';
                if (isAdmin) {
                    document.getElementById('adminAccessBtn').style.display = 'inline-block';
                }
            }
        }

        // Application Management
        async function initializeApplication() {
            const applicationData = {
                userId: currentUser.uid,
                status: 'draft',
                progress: 0,
                currentStep: 'personal_info',
                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                documents: {},
                payments: [],
                personalInfo: {},
                applicationStages: {
                    personal_info: { status: 'pending', completed: false },
                    document_upload: { status: 'pending', completed: false },
                    payment: { status: 'pending', completed: false },
                    review: { status: 'pending', completed: false },
                    approval: { status: 'pending', completed: false }
                }
            };
            
            await db.collection('applications').doc(currentUser.uid).set(applicationData);
        }

        async function loadUserApplication() {
            const doc = await db.collection('applications').doc(currentUser.uid).get();
            if (doc.exists) {
                userApplication = doc.data();
                updateDashboardUI();
                setupRealTimeUpdates();
            }
        }

        function setupRealTimeUpdates() {
            // Real-time listener for application updates
            realTimeListener = db.collection('applications').doc(currentUser.uid)
                .onSnapshot((doc) => {
                    if (doc.exists) {
                        userApplication = doc.data();
                        updateDashboardUI();
                    }
                });
        }

        //  ENHANCED UPLOAD SYSTEM with Firebase Storage Backup
function initializeDocumentUpload() {
    console.log(' Initializing enhanced upload system...');
    
    // Check if Firebase Storage is available
    const storageAvailable = typeof firebase.storage !== 'undefined';
    console.log(' Storage available:', storageAvailable);
    
    const uploadAreas = document.querySelectorAll('.upload-area');
    
    uploadAreas.forEach(area => {
        const docType = area.dataset.docType;
        
        if (storageAvailable) {
            // Show hybrid options (Storage + Free methods)
            area.innerHTML = `
                <div style="margin-bottom: 15px;">
                    <div onclick="handleDirectUpload('${docType}')" 
                         style="text-align: center; padding: 15px; border: 2px dashed #E30613; border-radius: 8px; cursor: pointer; margin-bottom: 10px; background: #fff0f0;">
                        <i class="fas fa-cloud-upload-alt" style="color: #E30613; font-size: 1.5rem;"></i>
                        <div style="font-weight: bold; color: #E30613; margin-top: 8px;">Direct Upload</div>
                        <div style="font-size: 0.8rem; color: #666;">Fast & Secure</div>
                    </div>
                </div>
                
                <div style="color: #666; text-align: center; margin: 10px 0; font-size: 0.9rem;">
                     OR USE 
                </div>
                
                <div class="upload-options" style="display: flex; gap: 8px; flex-wrap: wrap;">
                    <div class="upload-option" onclick="openGoogleForm('${docType}')" 
                         style="flex: 1; min-width: 80px; text-align: center; padding: 10px; border: 2px solid #4285f4; border-radius: 8px; cursor: pointer; background: white;">
                        <i class="fab fa-google-drive" style="color: #4285f4; font-size: 1.2rem;"></i>
                        <div style="font-size: 0.7rem; margin-top: 5px;">Google Form</div>
                    </div>
                    <div class="upload-option" onclick="sendViaEmail('${docType}')" 
                         style="flex: 1; min-width: 80px; text-align: center; padding: 10px; border: 2px solid #ea4335; border-radius: 8px; cursor: pointer; background: white;">
                        <i class="fas fa-envelope" style="color: #ea4335; font-size: 1.2rem;"></i>
                        <div style="font-size: 0.7rem; margin-top: 5px;">Email</div>
                    </div>
                    <div class="upload-option" onclick="sendViaWhatsApp('${docType}')" 
                         style="flex: 1; min-width: 80px; text-align: center; padding: 10px; border: 2px solid #25D366; border-radius: 8px; cursor: pointer; background: white;">
                        <i class="fab fa-whatsapp" style="color: #25D366; font-size: 1.2rem;"></i>
                        <div style="font-size: 0.7rem; margin-top: 5px;">WhatsApp</div>
                    </div>
                </div>
            `;
        } else {
            // Storage not available - show only free options
            area.innerHTML = `
                <div style="text-align: center; margin-bottom: 15px;">
                    <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; color: #666; margin-bottom: 10px;"></i>
                    <p style="font-weight: bold; color: #333;">Choose Upload Method</p>
                </div>
                
                <div class="upload-options" style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <div class="upload-option" onclick="openGoogleForm('${docType}')" 
                         style="flex: 1; min-width: 100px; text-align: center; padding: 15px; border: 2px solid #4285f4; border-radius: 8px; cursor: pointer; background: #f8f9fa;">
                        <i class="fab fa-google-drive" style="color: #4285f4; font-size: 1.5rem;"></i>
                        <div style="font-size: 0.8rem; margin-top: 8px; font-weight: 500;">Google Form</div>
                        <div style="font-size: 0.7rem; color: #666; margin-top: 4px;">Recommended</div>
                    </div>
                    <div class="upload-option" onclick="sendViaEmail('${docType}')" 
                         style="flex: 1; min-width: 100px; text-align: center; padding: 15px; border: 2px solid #ea4335; border-radius: 8px; cursor: pointer; background: #f8f9fa;">
                        <i class="fas fa-envelope" style="color: #ea4335; font-size: 1.5rem;"></i>
                        <div style="font-size: 0.8rem; margin-top: 8px; font-weight: 500;">Email</div>
                        <div style="font-size: 0.7rem; color: #666; margin-top: 4px;">Attach File</div>
                    </div>
                    <div class="upload-option" onclick="sendViaWhatsApp('${docType}')" 
                         style="flex: 1; min-width: 100px; text-align: center; padding: 15px; border: 2px solid #25D366; border-radius: 8px; cursor: pointer; background: #f8f9fa;">
                        <i class="fab fa-whatsapp" style="color: #25D366; font-size: 1.5rem;"></i>
                        <div style="font-size: 0.8rem; margin-top: 8px; font-weight: 500;">WhatsApp</div>
                        <div style="font-size: 0.7rem; color: #666; margin-top: 4px;">Fast & Easy</div>
                    </div>
                </div>
                
                <p style="font-size: 0.8em; margin-top: 15px; color: #666; text-align: center; padding: 0 10px;">
                    All methods are completely free and secure
                </p>
            `;
        }
    });
}

// Firebase Storage Direct Upload
function handleDirectUpload(docType) {
    const fileInput = document.createElement('input');
    fileInput.type = 'file';
    fileInput.accept = '.pdf,.jpg,.jpeg,.png,.doc,.docx';
    
    fileInput.onchange = async (e) => {
        const file = e.target.files[0];
        if (!file) return;
        
        if (!currentUser) {
            alert('Please log in to upload files directly');
            return;
        }
        
        // Validate file size (10MB max)
        if (file.size > 10 * 1024 * 1024) {
            alert('File size must be less than 10MB. Please use Google Form for larger files.');
            return;
        }
        
        // Validate file type
        const validTypes = ['.pdf', '.jpg', '.jpeg', '.png', '.doc', '.docx'];
        const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
        if (!validTypes.includes(fileExtension)) {
            alert('Please upload PDF, Word, or image files only.');
            return;
        }
        
        try {
            const fileName = `${currentUser.uid}/${docType}_${Date.now()}_${file.name.replace(/\s+/g, '_')}`;
            const storageRef = firebase.storage().ref().child(fileName);
            
            // Show upload progress
            const uploadArea = document.querySelector(`[data-doc-type="${docType}"]`);
            const originalHTML = uploadArea.innerHTML;
            
            uploadArea.innerHTML = `
                <div style="text-align: center; padding: 15px;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 1.5rem; color: #E30613;"></i>
                    <p style="margin: 10px 0; font-weight: 500;">Uploading to secure cloud...</p>
                    <div style="background: #f0f0f0; border-radius: 10px; height: 8px; margin: 10px 0;">
                        <div id="uploadProgress" style="background: #E30613; height: 100%; width: 0%; border-radius: 10px; transition: width 0.3s;"></div>
                    </div>
                    <p style="font-size: 0.8rem; color: #666; margin-top: 5px;">${file.name}</p>
                </div>
            `;
            
            const uploadTask = storageRef.put(file);
            
            uploadTask.on('state_changed',
                (snapshot) => {
                    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                    const progressBar = document.getElementById('uploadProgress');
                    if (progressBar) {
                        progressBar.style.width = progress + '%';
                    }
                },
                (error) => {
                    console.error('Upload failed:', error);
                    uploadArea.innerHTML = originalHTML;
                    alert('Direct upload failed: ' + error.message + '\n\nPlease use Google Form, Email, or WhatsApp instead.');
                },
                async () => {
                    try {
                        const downloadURL = await uploadTask.snapshot.ref.getDownloadURL();
                        
                        // Save to Firestore
                        await db.collection('applications').doc(currentUser.uid).update({
                            [`documents.${docType}`]: {
                                url: downloadURL,
                                fileName: file.name,
                                uploadedAt: firebase.firestore.FieldValue.serverTimestamp(),
                                status: 'uploaded',
                                method: 'direct_upload',
                                fileSize: file.size,
                                fileType: file.type
                            },
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                        
                        uploadArea.innerHTML = `
                            <div style="text-align: center; padding: 15px; color: green;">
                                <i class="fas fa-check-circle" style="font-size: 1.5rem;"></i>
                                <p style="margin: 10px 0; font-weight: 500;">Upload Successful!</p>
                                <p style="font-size: 0.8rem; margin: 5px 0;">${file.name}</p>
                                <p style="font-size: 0.7rem; color: #666; margin-top: 8px;">Securely stored in cloud</p>
                            </div>
                        `;
                        
                        // Update status
                        const statusElement = document.getElementById(`${docType}Status`);
                        if (statusElement) {
                            statusElement.textContent = 'UPLOADED';
                            statusElement.className = 'document-status status-approved';
                        }
                        
                        console.log(' Direct upload successful:', docType);
                        
                    } catch (error) {
                        console.error('Error saving to Firestore:', error);
                        uploadArea.innerHTML = originalHTML;
                        alert('Upload completed but failed to save record. Please contact support.');
                    }
                }
            );
            
        } catch (error) {
            console.error('Upload error:', error);
            alert('Direct upload not available. Please use Google Form, Email, or WhatsApp.');
        }
    };
    
    fileInput.click();
}

// Free Upload Methods
function openGoogleForm(docType) {
    // Use your existing application form
    const formUrl = 'https://docs.google.com/forms/d/e/1FAIpQLSeWRMWtwbyzkyOp0D5LNrRdef4v4pvIX0Ki0JS62bE0u1tqSA/viewform';
    const params = new URLSearchParams({
        'usp': 'pp_url',
        'entry.123456789': docType, // You'll need to get actual field IDs
        'entry.987654321': currentUser ? currentUser.uid : 'not_logged_in'
    });
    
    window.open(`${formUrl}?${params}`, '_blank');
    trackDocumentAction(docType, 'google_form');
}

function sendViaEmail(docType) {
    const user = currentUser ? currentUser.uid : 'not_logged_in';
    const subject = `Document Upload: ${docType} - User: ${user}`;
    const body = `Dear Global Immigration SC Team,

Please find attached my ${docType} document.

Application Details:
 Document Type: ${docType}
 User ID: ${user}
 Date: ${new Date().toLocaleDateString()}

Please confirm receipt of this document.

Thank you,
Global Immigration SC Applicant`;

    window.location.href = `mailto:infoglobalimmigrationsc@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    trackDocumentAction(docType, 'email');
}

function sendViaWhatsApp(docType) {
    const user = currentUser ? currentUser.uid : 'not_logged_in';
    const message = ` Global Immigration SC - Document Upload

Document Type: ${docType}
User ID: ${user}
Date: ${new Date().toLocaleDateString()}

Hello! I would like to upload my ${docType} document. Please guide me on how to proceed.

Thank you!`;

    window.open(`https://wa.me/231886590302?text=${encodeURIComponent(message)}`, '_blank');
    trackDocumentAction(docType, 'whatsapp');
}

// Track user actions in Firestore
async function trackDocumentAction(docType, method) {
    if (!currentUser) return;
    
    try {
        await db.collection('applications').doc(currentUser.uid).update({
            [`documents.${docType}.lastAction`]: method,
            [`documents.${docType}.${method}At`]: firebase.firestore.FieldValue.serverTimestamp(),
            [`documents.${docType}.status`]: 'pending_upload',
            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        });
        console.log(` Tracked ${method} action for ${docType}`);
    } catch (error) {
        console.log('Tracking error:', error);
    }
}

console.log(' Enhanced upload system loaded successfully');

async function updateApplicationStage(stage, completed) {
    if (!currentUser) return;
    
    try {
        await db.collection('applications').doc(currentUser.uid).update({
            [`applicationStages.${stage}`]: {
                completed: completed,
                status: completed ? 'completed' : 'in_progress',
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            },
            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        });
    } catch (error) {
        console.error('Error updating application stage:', error);
    }
}

// Missing function for admin dashboard
function calculateOverallProgress(applicant) {
    if (!applicant || !applicant.applicationStages) return 0;
    
    const stages = applicant.applicationStages;
    let completedCount = 0;
    const totalStages = Object.keys(stages).length;
    
    Object.values(stages).forEach(stage => {
        if (stage && stage.completed) completedCount++;
    });
    
    return Math.round((completedCount / totalStages) * 100);
}

// Safe date formatting function for timeline
function formatTimelineDate(date) {
    if (!date) return getStepDateText('pending');
    try {
        if (date.toDate && typeof date.toDate === 'function') {
            return date.toDate().toLocaleDateString();
        }
        return getStepDateText('pending');
    } catch (error) {
        return getStepDateText('pending');
    }
}

// Safe document date function
function getLatestDocumentDate(documents) {
    if (!documents) return null;
    
    let latestDate = null;
    Object.values(documents).forEach(doc => {
        if (doc && doc.uploadedAt && doc.uploadedAt.toDate && 
            (!latestDate || doc.uploadedAt > latestDate)) {
            latestDate = doc.uploadedAt;
        }
    });
    return latestDate;
}
        // Enhanced Dashboard UI Updates
function updateDashboardUI() {
    if (!userApplication) return;
    
    // Update progress bars and steps based on actual application status
    updateProgressBars();
    
    // Update document status
    updateDocumentStatus();
    
    // Update application timeline
    updateApplicationTimeline();
    
    // Update next steps based on current progress
    updateNextSteps();
}

function updateProgressBars() {
    if (!userApplication) return;
    
    const progress = calculateOverallProgress();
    document.getElementById('mainProgressBar').style.width = progress + '%';
    document.getElementById('progressPercentage').textContent = progress + '% Complete';
    
    // Update step indicators based on application status
    updateStepIndicators();
}

function calculateOverallProgress() {
    if (!userApplication || !userApplication.applicationStages) return 0;
    
    const stages = userApplication.applicationStages;
    let completedCount = 0;
    const totalStages = Object.keys(stages).length;
    
    // Count completed stages
    Object.values(stages).forEach(stage => {
        if (stage.completed) completedCount++;
    });
    
    return Math.round((completedCount / totalStages) * 100);
}

function updateStepIndicators() {
    if (!userApplication || !userApplication.applicationStages) return;
    
    const stages = userApplication.applicationStages;
    const status = userApplication.status;
    
    // Map application status to step completion
    const stepStatus = {
        'draft': { completed: 0, current: 1 },
        'submitted': { completed: 1, current: 2 },
        'document_upload': { completed: 1, current: 2 },
        'payment_pending': { completed: 2, current: 3 },
        'under_review': { completed: 3, current: 4 },
        'approved': { completed: 4, current: 5 },
        'rejected': { completed: 2, current: 2 } // Stops at document stage if rejected
    };
    
    const currentStep = stepStatus[status] || { completed: 0, current: 1 };
    
    // Update each step indicator
    for (let i = 1; i <= 5; i++) {
        const stepIndicator = document.getElementById(`step${i}`);
        if (stepIndicator) {
            if (i <= currentStep.completed) {
                stepIndicator.className = 'step-indicator completed';
                stepIndicator.innerHTML = '';
            } else if (i === currentStep.current) {
                stepIndicator.className = 'step-indicator active';
                stepIndicator.innerHTML = i;
            } else {
                stepIndicator.className = 'step-indicator';
                stepIndicator.innerHTML = i;
            }
        }
    }
}

function updateNextSteps() {
    if (!userApplication) return;
    
    const nextStepsList = document.getElementById('nextStepsList');
    if (!nextStepsList) return;
    
    const status = userApplication.status;
    let nextSteps = [];
    
    switch (status) {
        case 'draft':
            nextSteps = [
                'Complete your profile information',
                'Upload required documents',
                'Submit your application for review'
            ];
            break;
        case 'submitted':
        case 'document_upload':
            nextSteps = [
                'Wait for document verification',
                'Complete payment for application processing',
                'Prepare for possible interview'
            ];
            break;
        case 'payment_pending':
            nextSteps = [
                'Complete payment processing',
                'Wait for application review',
                'Monitor your email for updates'
            ];
            break;
        case 'under_review':
            nextSteps = [
                'Application is under review',
                'Check for any additional document requests',
                'Wait for final decision'
            ];
            break;
        case 'approved':
            nextSteps = [
                'Visa has been approved!',
                'Prepare for travel arrangements',
                'Contact us for relocation support'
            ];
            break;
        case 'rejected':
            nextSteps = [
                'Application was not approved',
                'Contact us for feedback and next steps',
                'Consider reapplying with additional documentation'
            ];
            break;
        default:
            nextSteps = [
                'Complete your profile information',
                'Upload required documents',
                'Complete payment for application processing'
            ];
    }
    
    nextStepsList.innerHTML = nextSteps.map(step => `<li>${step}</li>`).join('');
}

        function updateDocumentStatus() {
            const documents = userApplication.documents || {};
            
            Object.keys(documents).forEach(docType => {
                const doc = documents[docType];
                const statusElement = document.getElementById(`${docType}Status`);
                
                if (statusElement) {
                    statusElement.textContent = doc.status.replace('_', ' ').toUpperCase();
                    statusElement.className = `document-status status-${doc.status.replace('_', '-')}`;
                }
            });
        }

        function updateApplicationTimeline() {
    if (!userApplication) return;
    
    const timelineContainer = document.querySelector('#status .dashboard-section');
    if (!timelineContainer) return;
    
    const status = userApplication.status || 'draft';
    const createdAt = userApplication.createdAt;
    
    const timelineSteps = [
        {
            id: 'submitted',
            title: 'Application Submitted',
            description: 'Your initial application has been received and is under review.',
            status: getStepStatus('submitted', status),
            date: createdAt
        },
        {
            id: 'document_review',
            title: 'Document Review',
            description: 'We are currently reviewing your submitted documents. Please ensure all required documents are uploaded.',
            status: getStepStatus('document_upload', status),
            date: userApplication.documents ? getLatestDocumentDate(userApplication.documents) : null
        },
        {
            id: 'payment',
            title: 'Payment Processing',
            description: 'Once documents are approved, you\'ll need to complete payment for processing fees.',
            status: getStepStatus('payment_pending', status),
            date: null
        },
        {
            id: 'embassy',
            title: 'Embassy Submission',
            description: 'Your application will be submitted to the appropriate embassy for final review.',
            status: getStepStatus('under_review', status),
            date: null
        },
        {
            id: 'visa',
            title: 'Visa Issuance',
            description: 'Upon approval, your visa will be issued and prepared for collection.',
            status: getStepStatus('approved', status),
            date: null
        }
    ];
    
    const timelineHTML = `
        <div style="margin: 30px 0;">
            <div class="progress-bar">
                <div class="progress-fill" style="width: ${calculateOverallProgress()}%;"></div>
            </div>
            <p style="text-align: center; font-weight: 600; margin-top: 10px;">
                Application Status: ${getStatusText(status)}
            </p>
        </div>
        
        <div style="position: relative; margin: 40px 0;">
            <div style="position: absolute; left: 15px; top: 0; bottom: 0; width: 2px; background-color: var(--primary-red);"></div>
            
            ${timelineSteps.map((step, index) => `
                <div style="position: relative; padding-left: 50px; margin-bottom: 30px;">
                    <div style="position: absolute; left: 0; top: 0; width: 32px; height: 32px; border-radius: 50%; 
                         background-color: ${getStepColor(step.status)}; color: white; 
                         display: flex; align-items: center; justify-content: center; font-weight: bold;
                         border: 3px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        ${step.status === 'completed' ? '' : index + 1}
                    </div>
                    <h4 style="margin-bottom: 5px; color: ${getStepColor(step.status)};">${step.title}</h4>
                    <p style="color: var(--medium-gray); margin-bottom: 5px;">
                        ${step.date ? step.date.toDate().toLocaleDateString() : getStepDateText(step.status)}
                    </p>
                    <p style="color: var(--dark-gray);">${step.description}</p>
                </div>
            `).join('')}
        </div>
    `;
    
    const existingTimeline = timelineContainer.querySelector('.timeline-content');
    if (existingTimeline) {
        existingTimeline.innerHTML = timelineHTML;
    } else {
        const newTimeline = document.createElement('div');
        newTimeline.className = 'timeline-content';
        newTimeline.innerHTML = timelineHTML;
        timelineContainer.appendChild(newTimeline);
    }
}

function getStepStatus(step, currentStatus) {
    const statusOrder = ['draft', 'submitted', 'document_upload', 'payment_pending', 'under_review', 'approved', 'rejected'];
    const currentIndex = statusOrder.indexOf(currentStatus);
    const stepIndex = statusOrder.indexOf(step);
    
    if (stepIndex < currentIndex) return 'completed';
    if (stepIndex === currentIndex) return 'current';
    return 'pending';
}

function getStepColor(status) {
    switch (status) {
        case 'completed': return '#4CAF50';
        case 'current': return 'var(--primary-red)';
        default: return '#ccc';
    }
}

function getStatusText(status) {
    const statusMap = {
        'draft': 'Draft - In Progress',
        'submitted': 'Submitted for Review',
        'document_upload': 'Document Submission Phase',
        'payment_pending': 'Payment Processing',
        'under_review': 'Under Review',
        'approved': 'Approved - Visa Ready',
        'rejected': 'Application Rejected'
    };
    return statusMap[status] || 'Application Started';
}

function getStepDateText(status) {
    switch (status) {
        case 'completed': return 'Completed';
        case 'current': return 'Current Step';
        default: return 'Upcoming';
    }
}
        // Admin Dashboard Functions
        function showAdminDashboard() {
    document.getElementById('dashboard').style.display = 'none';
    document.getElementById('adminDashboard').style.display = 'block';
    loadAdminData();
    
    // ADD THIS: Enable delete functionality
    enhanceAdminDashboard();
}

        async function loadAdminData() {
    // Load all applications for admin review
    const applicationsSnapshot = await db.collection('applications').get();
    const applicants = [];
    
    applicationsSnapshot.forEach(doc => {
        applicants.push({
            id: doc.id,
            ...doc.data()
        });
    });
    
    updateAdminUI(applicants);
    setupAdminRealTimeUpdates();
    
    // ADD THIS LINE - This will enable delete functionality
    enhanceAdminDashboard();
}

        function setupAdminRealTimeUpdates() {
            // Real-time listener for all applications
            db.collection('applications').onSnapshot((snapshot) => {
                const applicants = [];
                snapshot.forEach(doc => {
                    applicants.push({
                        id: doc.id,
                        ...doc.data()
                    });
                });
                updateAdminUI(applicants);
            });
        }

        function updateAdminUI(applicants) {
            updateAdminStats(applicants);
            renderApplicantsList(applicants);
        }

        function updateAdminStats(applicants) {
            const total = applicants.length;
            const pending = applicants.filter(app => app.status === 'submitted' || app.status === 'draft').length;
            const approved = applicants.filter(app => app.status === 'approved').length;
            const rejected = applicants.filter(app => app.status === 'rejected').length;
            
            document.getElementById('totalApplicants').textContent = total;
            document.getElementById('pendingReview').textContent = pending;
            document.getElementById('approvedApps').textContent = approved;
            document.getElementById('rejectedApps').textContent = rejected;
        }

        async function renderApplicantsList(applicants) {
            const container = document.getElementById('applicantsList');
            container.innerHTML = '';
            
            for (const applicant of applicants) {
                const userDoc = await db.collection('users').doc(applicant.userId).get();
                const userData = userDoc.data();
                
                const card = document.createElement('div');
                card.className = 'applicant-card';
                card.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h4>${userData?.name || 'Unknown User'}</h4>
                            <p>${userData?.email || 'No email'}</p>
                            <p>Applied: ${applicant.createdAt?.toDate?.().toLocaleDateString() || 'Unknown date'}</p>
                        </div>
                        <div>
                            <span class="status-badge status-${applicant.status}">${applicant.status.toUpperCase()}</span>
                            <div>Progress: ${calculateOverallProgress(applicant)}%</div>
                        </div>
                    </div>
                `;
                
                card.addEventListener('click', () => showApplicantDetail(applicant));
                container.appendChild(card);
            }
        }

        async function showApplicantDetail(applicant) {
            const userDoc = await db.collection('users').doc(applicant.userId).get();
            const userData = userDoc.data();
            
            document.getElementById('applicantDetailContent').innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <div>
                        <h4>${userData?.name || 'Unknown User'}</h4>
                        <p>Email: ${userData?.email || 'No email'}</p>
                        <p>Phone: ${applicant.personalInfo?.phone || 'Not provided'}</p>
                        <p>Country: ${applicant.personalInfo?.country || 'Not specified'}</p>
                    </div>
                    <div>
                        <select id="applicationStatus" class="form-control">
                            <option value="draft" ${applicant.status === 'draft' ? 'selected' : ''}>Draft</option>
                            <option value="submitted" ${applicant.status === 'submitted' ? 'selected' : ''}>Submitted</option>
                            <option value="under_review" ${applicant.status === 'under_review' ? 'selected' : ''}>Under Review</option>
                            <option value="approved" ${applicant.status === 'approved' ? 'selected' : ''}>Approved</option>
                            <option value="rejected" ${applicant.status === 'rejected' ? 'selected' : ''}>Rejected</option>
                        </select>
                        <button onclick="updateApplicationStatus('${applicant.userId}')" class="btn btn-primary" style="margin-top: 10px;">Update Status</button>
                    </div>
                </div>
                
                <div style="margin-top: 20px;">
                    <h5>Documents</h5>
                    <div class="document-list">
                        ${renderAdminDocuments(applicant.documents || {})}
                    </div>
                </div>
            `;
            
            // Show detail view
            document.querySelectorAll('.dashboard-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById('applicantDetail').classList.add('active');
        }

        function renderAdminDocuments(documents) {
            if (Object.keys(documents).length === 0) {
                return '<p>No documents uploaded yet.</p>';
            }
            
            return Object.keys(documents).map(docType => {
                const doc = documents[docType];
                return `
                    <div class="document-item">
                        <div style="flex: 1;">
                            <strong>${docType.replace('_', ' ').toUpperCase()}</strong>
                            <div>File: ${doc.fileName}</div>
                            <div>Uploaded: ${doc.uploadedAt?.toDate?.().toLocaleDateString() || 'Unknown date'}</div>
                            <div>Status: ${doc.status}</div>
                            ${doc.comments ? `<div>Comments: ${doc.comments}</div>` : ''}
                        </div>
                        <div class="document-actions">
                            <a href="${doc.url}" target="_blank" class="btn btn-small btn-primary">View</a>
                            <select onchange="updateDocumentStatus('${docType}', this.value)" class="form-control">
                                <option value="pending_review" ${doc.status === 'pending_review' ? 'selected' : ''}>Pending Review</option>
                                <option value="approved" ${doc.status === 'approved' ? 'selected' : ''}>Approved</option>
                                <option value="rejected" ${doc.status === 'rejected' ? 'selected' : ''}>Rejected</option>
                            </select>
                        </div>
                    </div>
                `;
            }).join('');
        }

        async function updateDocumentStatus(docType, status) {
            await db.collection('applications').doc(currentUser.uid).update({
                [`documents.${docType}.status`]: status,
                [`documents.${docType}.reviewedBy`]: currentUser.uid,
                [`documents.${docType}.reviewDate`]: firebase.firestore.FieldValue.serverTimestamp(),
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            });
        }

        async function updateApplicationStatus(applicantId) {
            const status = document.getElementById('applicationStatus').value;
            await db.collection('applications').doc(applicantId).update({
                status: status,
                updatedAt: firebase.firestore.FieldValue.serverTimestamp()
            });
            alert('Application status updated successfully!');
        }

        // Utility Functions
        function showLoadingState(formId, text) {
            const form = document.getElementById(formId);
            const submitBtn = form.querySelector('button[type="submit"]');
            const btnText = submitBtn.querySelector('.btn-text');
            const spinner = submitBtn.querySelector('.loading-spinner');
            
            btnText.textContent = text;
            spinner.style.display = 'inline-block';
            submitBtn.disabled = true;
        }

        function resetLoadingState(formId, originalText) {
            const form = document.getElementById(formId);
            const submitBtn = form.querySelector('button[type="submit"]');
            const btnText = submitBtn.querySelector('.btn-text');
            const spinner = submitBtn.querySelector('.loading-spinner');
            
            btnText.textContent = originalText;
            spinner.style.display = 'none';
            submitBtn.disabled = false;
        }

        function showDashboard() {
    document.getElementById('authModal').style.display = 'none';
    document.getElementById('dashboard').style.display = 'block';
    document.querySelector('main').style.display = 'none';
    document.querySelector('footer').style.display = 'none';
    document.getElementById('userName').textContent = `Welcome, ${currentUser.email.split('@')[0]}`;
    
    // Initialize all dashboard systems
    initializeDashboardSystems();
}

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
           
            // Emergency function to hide loading screen
    function forceHideLoadingScreen() {
        const loadingScreen = document.getElementById('loading-screen');
        if (loadingScreen) {
            loadingScreen.classList.add('force-hide');
            loadingScreen.style.display = 'none';
            loadingScreen.style.opacity = '0';
            console.log(' Loading screen force-hidden');
        }
    }

    // Log any errors that might be blocking execution
    window.addEventListener('error', function(e) {
        console.error('Global error:', e.error);
        console.log('Error at:', e.filename, e.lineno);
    });
    
    // Call this if loading screen persists
    setTimeout(forceHideLoadingScreen, 5000);

            // Check if user is already logged in
            auth.onAuthStateChanged(async (user) => {
                if (user) {
                    currentUser = user;
                    await checkUserRole();
                    await loadUserApplication();
                    showDashboard();
                }
            });

            // Admin access button
            document.getElementById('adminAccessBtn').addEventListener('click', showAdminDashboard);
            
            // Back to user view button
            document.getElementById('backToUser').addEventListener('click', () => {
                document.getElementById('adminDashboard').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
            });
            
            // Admin logout
            document.getElementById('adminLogout').addEventListener('click', () => {
                auth.signOut();
                location.reload();
            });

            // Loading Screen - FIXED CODE
// Loading Screen - FIXED CODE
window.addEventListener('load', function() {
    console.log(' Page fully loaded, hiding loading screen');
    
    // Hide loading screen after 2 seconds max, regardless of image loading
    setTimeout(function() {
        const loadingScreen = document.getElementById('loading-screen');
        if (loadingScreen) {
            loadingScreen.style.opacity = '0';
            setTimeout(function() {
                loadingScreen.style.display = 'none';
                console.log(' Loading screen hidden normally');
            }, 500);
        }
    }, 2000);
    
    // Force hide after 3 seconds as backup
    setTimeout(() => {
        const loadingScreen = document.getElementById('loading-screen');
        if (loadingScreen && loadingScreen.style.display !== 'none') {
            loadingScreen.style.display = 'none';
            loadingScreen.classList.add('force-hide');
            console.log(' Loading screen force-hidden by backup timer');
        }
    }, 3000);
});

// Animate stats with delay
setTimeout(() => {
    animateValue('clients', 0, 500, 2000);
    animateValue('success', 0, 98, 2000);
    animateValue('countries', 0, 80, 2000);
    animateValue('experience', 0, 10, 2000);
}, 500);
            
            // Mobile Menu Toggle - Fixed version
            document.querySelector('.mobile-toggle').addEventListener('click', function() {
                const navMenu = document.querySelector('.nav-menu');
                navMenu.classList.toggle('active');
                
                // Toggle icon between bars and times
                const icon = this.querySelector('i');
                if (navMenu.classList.contains('active')) {
                    icon.classList.remove('fa-bars');
                    icon.classList.add('fa-times');
                } else {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                }
            });

            // Close mobile menu when clicking outside
            document.addEventListener('click', function(e) {
                const navMenu = document.querySelector('.nav-menu');
                const mobileToggle = document.querySelector('.mobile-toggle');
                
                if (navMenu.classList.contains('active') && 
                    !navMenu.contains(e.target) && 
                    !mobileToggle.contains(e.target)) {
                    navMenu.classList.remove('active');
                    mobileToggle.querySelector('i').classList.remove('fa-times');
                    mobileToggle.querySelector('i').classList.add('fa-bars');
                }
            });

            // Dropdown menu for mobile - Fixed version
            if (window.innerWidth <= 768) {
                const dropdowns = document.querySelectorAll('.dropdown > a');
                dropdowns.forEach(dropdownLink => {
                    dropdownLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        const dropdown = this.parentElement;
                        dropdown.classList.toggle('active');
                    });
                });
            }
            
            // Live Session Modal
            const liveSessionBtn = document.getElementById('liveSessionBtn');
            const liveSessionModal = document.getElementById('liveSessionModal');
            const registerModal = document.getElementById('registerModal');
            const closeModalButtons = document.querySelectorAll('.close-modal');
            
            liveSessionBtn.addEventListener('click', function(e) {
                e.preventDefault();
                liveSessionModal.style.display = 'flex';
            });
            
            document.getElementById('joinLive').addEventListener('click', function() {
                window.open('https://youtube.com/@info.globalimmigrationsc?si=O-DxqL1jAMTFTE-V', '_blank');
            });
            
            document.getElementById('registerSession').addEventListener('click', function() {
                liveSessionModal.style.display = 'none';
                registerModal.style.display = 'flex';
            });
            
            closeModalButtons.forEach(button => {
                button.addEventListener('click', function() {
                    liveSessionModal.style.display = 'none';
                    registerModal.style.display = 'none';
                    authModal.style.display = 'none';
                });
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target === liveSessionModal) {
                    liveSessionModal.style.display = 'none';
                }
                if (e.target === registerModal) {
                    registerModal.style.display = 'none';
                }
                if (e.target === authModal) {
                    authModal.style.display = 'none';
                }
            });

            // Email validation function for form validation
            function validateEmail(email) {
                const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                return re.test(String(email).toLowerCase());
            }

            // Password strength checker
            function checkPasswordStrength(password) {
                let strength = 0;
                const strengthText = document.querySelector('.password-strength-text');
                const strengthBar = document.querySelector('.password-strength-bar');
                const strengthContainer = document.querySelector('.password-strength');
                
                // Reset
                strengthContainer.classList.remove('weak', 'medium', 'strong');
                
                if (password.length >= 8) strength++;
                if (password.match(/[a-z]/) && password.match(/[A-Z]/)) strength++;
                if (password.match(/\d/)) strength++;
                if (password.match(/[^a-zA-Z\d]/)) strength++;
                
                if (password.length === 0) {
                    strengthText.textContent = '';
                    strengthBar.style.width = '0%';
                } else if (strength <= 2) {
                    strengthText.textContent = 'Weak password';
                    strengthContainer.classList.add('weak');
                } else if (strength === 3) {
                    strengthText.textContent = 'Medium password';
                    strengthContainer.classList.add('medium');
                } else {
                    strengthText.textContent = 'Strong password';
                    strengthContainer.classList.add('strong');
                }
            }

            // Application Portal Authentication
            const authModal = document.getElementById('authModal');
            const loginBtn = document.getElementById('loginBtn');
            const registerBtn = document.getElementById('registerBtn');
            const authTabs = document.querySelectorAll('.auth-tab');
            const authForms = document.querySelectorAll('.auth-form');
            
            loginBtn.addEventListener('click', function(e) {
                e.preventDefault();
                authModal.style.display = 'flex';
                // Set active tab to login
                authTabs[0].click();
            });
            
            registerBtn.addEventListener('click', function(e) {
                e.preventDefault();
                authModal.style.display = 'flex';
                // Set active tab to register
                authTabs[1].click();
            });
            
            // Auth tab switching
            authTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    
                    // Update active tab
                    authTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show corresponding form
                    authForms.forEach(form => {
                        form.classList.remove('active');
                        if (form.id === `${tabName}Form`) {
                            form.classList.add('active');
                        }
                    });
                });
            });
            
            // Password strength monitoring
            document.getElementById('registerPassword').addEventListener('input', function() {
                checkPasswordStrength(this.value);
            });
            
            // Logout functionality
            document.getElementById('logoutBtn').addEventListener('click', function() {
                auth.signOut();
                // Show main content
                document.querySelector('main').style.display = 'block';
                document.querySelector('footer').style.display = 'block';
                
                // Hide dashboard
                document.getElementById('dashboard').style.display = 'none';
            });
            
            // Dashboard navigation
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            const dashboardSections = document.querySelectorAll('.dashboard-section');
            
            sidebarLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetSection = this.getAttribute('data-section');
                    
                    // Update active link
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show corresponding section
                    dashboardSections.forEach(section => {
                        section.classList.remove('active');
                        if (section.id === targetSection) {
                            section.classList.add('active');
                        }
                    });
                });
            });
            
            // Session Registration Form
            document.getElementById('sessionForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                let isValid = true;
                
                // Validate name
                const name = document.getElementById('sessionName');
                const nameError = document.getElementById('sessionNameError');
                if (!name.value.trim()) {
                    nameError.style.display = 'block';
                    isValid = false;
                } else {
                    nameError.style.display = 'none';
                }
                
                // Validate email
                const email = document.getElementById('sessionEmail');
                const emailError = document.getElementById('sessionEmailError');
                if (!email.value.trim() || !validateEmail(email.value)) {
                    emailError.style.display = 'block';
                    isValid = false;
                } else {
                    emailError.style.display = 'none';
                }
                
                if (isValid) {
                    // Show loading state
                    const submitBtn = this.querySelector('button[type="submit"]');
                    const btnText = submitBtn.querySelector('.btn-text');
                    const spinner = submitBtn.querySelector('.loading-spinner');
                    
                    btnText.textContent = 'Sending...';
                    spinner.style.display = 'inline-block';
                    submitBtn.disabled = true;
                    
                    // Create FormData object
                    const formData = new FormData(this);
                    
                    // Send form data using Fetch API
                    fetch(this.action, {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'Accept': 'application/json'
                        }
                    })
                    .then(response => {
                        if (response.ok) {
                            // Show success message
                            document.getElementById('sessionSuccess').style.display = 'block';
                            
                            // Form submission tracking for Google Analytics
                            gtag('event', 'form_submission', {
                                'event_category': 'session',
                                'event_label': 'session_registration'
                            });
                            
                            // Reset form
                            this.reset();
                        } else {
                            throw new Error('Form submission failed');
                        }
                    })
                    .catch(error => {
                        alert('There was a problem with your registration. Please try again or contact us directly.');
                    })
                    .finally(() => {
                        // Reset button
                        btnText.textContent = 'Send Registration';
                        spinner.style.display = 'none';
                        submitBtn.disabled = false;
                        
                        // Hide success message after 5 seconds
                        setTimeout(() => {
                            document.getElementById('sessionSuccess').style.display = 'none';
                            registerModal.style.display = 'none';
                        }, 5000);
                    });
                }
            });
            
            // Contact Form Validation and Submission
            document.getElementById('inquiryForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                let isValid = true;
                
                // Validate name
                const name = document.getElementById('name');
                const nameError = document.getElementById('nameError');
                if (!name.value.trim()) {
                    nameError.style.display = 'block';
                    isValid = false;
                } else {
                    nameError.style.display = 'none';
                }
                
                // Validate email
                const email = document.getElementById('email');
                const emailError = document.getElementById('emailError');
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!email.value.trim() || !emailRegex.test(email.value)) {
                    emailError.style.display = 'block';
                    isValid = false;
                } else {
                    emailError.style.display = 'none';
                }
                
                // Validate phone
                const phone = document.getElementById('phone');
                const phoneError = document.getElementById('phoneError');
                if (!phone.value.trim()) {
                    phoneError.style.display = 'block';
                    isValid = false;
                } else {
                    phoneError.style.display = 'none';
                }
                
                // Validate country
                const country = document.getElementById('country');
                const countryError = document.getElementById('countryError');
                if (!country.value) {
                    countryError.style.display = 'block';
                    isValid = false;
                } else {
                    countryError.style.display = 'none';
                }
                
                // Validate interest
                const interest = document.querySelector('input[name="interest"]:checked');
                const interestError = document.getElementById('interestError');
                if (!interest) {
                    interestError.style.display = 'block';
                    isValid = false;
                } else {
                    interestError.style.display = 'none';
                }
                
                // Validate message
                const message = document.getElementById('message');
                const messageError = document.getElementById('messageError');
                if (!message.value.trim()) {
                    messageError.style.display = 'block';
                    isValid = false;
                } else {
                    messageError.style.display = 'none';
                }
                
                if (isValid) {
                    // Show loading state
                    const submitBtn = this.querySelector('button[type="submit"]');
                    const btnText = submitBtn.querySelector('.btn-text');
                    const spinner = submitBtn.querySelector('.loading-spinner');
                    
                    btnText.textContent = 'Submitting...';
                    spinner.style.display = 'inline-block';
                    submitBtn.disabled = true;
                    
                    // Create FormData object
                    const formData = new FormData(this);
                    
                    // Send form data using Fetch API
                    fetch(this.action, {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'Accept': 'application/json'
                        }
                    })
                    .then(response => {
                        if (response.ok) {
                            // Show success message
                            document.getElementById('formSuccess').style.display = 'block';
                            
                            // Form submission tracking for Google Analytics
                            gtag('event', 'form_submission', {
                                'event_category': 'contact',
                                'event_label': 'inquiry_form'
                            });
                            
                            // Reset form
                            this.reset();
                        } else {
                            throw new Error('Form submission failed');
                        }
                    })
                    .catch(error => {
                        alert('There was a problem with your submission. Please try again or contact us directly.');
                    })
                    .finally(() => {
                        // Reset button
                        btnText.textContent = 'Submit Inquiry';
                        spinner.style.display = 'none';
                        submitBtn.disabled = false;
                        
                        // Hide success message after 5 seconds
                        setTimeout(() => {
                            document.getElementById('formSuccess').style.display = 'none';
                            }, 5000);
                    });
                }
            });
            
            // Smooth Scrolling for Anchor Links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    if (this.getAttribute('href') !== '#') {
                        e.preventDefault();
                        
                        const targetId = this.getAttribute('href');
                        const targetElement = document.querySelector(targetId);
                        
                        if (targetElement) {
                            window.scrollTo({
                                top: targetElement.offsetTop - 70,
                                behavior: 'smooth'
                            });
                            
                            // Close mobile menu if open
                            if (window.innerWidth <= 768) {
                                document.querySelector('.nav-menu').classList.remove('active');
                            }
                        }
                    }
                });
            });
            
            // Animate value function for stats
            function animateValue(id, start, end, duration) {
                const obj = document.getElementById(id);
                let startTimestamp = null;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    obj.innerHTML = Math.floor(progress * (end - start) + start) + (id === 'success' ? '%' : '+');
                    if (progress < 1) {
                        window.requestAnimationFrame(step);
                    }
                };
                window.requestAnimationFrame(step);
            }
            
            // Lazy loading for images
            if ('IntersectionObserver' in window) {
                const lazyImages = document.querySelectorAll('img[loading="lazy"]');
                
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.src = img.dataset.src;
                            img.classList.remove('lazy');
                            imageObserver.unobserve(img);
                        }
                    });
                });
                
                lazyImages.forEach(img => {
                    imageObserver.observe(img);
                });
            }

            // Check logo with timeout
function checkLogo() {
    const logoImg = document.querySelector('.logo img');
    const fallback = document.getElementById('header-logo-fallback');
    
    setTimeout(() => {
        if (!logoImg.complete || logoImg.naturalHeight === 0) {
            console.log('Logo image failed, showing fallback');
            if (logoImg) logoImg.style.display = 'none';
            if (fallback) fallback.style.display = 'flex';
        }
    }, 1000);
}

            // Check about image
            checkImage('IMAGES.webp', function(success) {
                if (!success) {
                    document.querySelector('.about-image img').style.display = 'none';
                    document.getElementById('about-fallback').style.display = 'flex';
                }
            });

            // Check founder image
            checkImage('Founder.jpg', function(success) {
                if (!success) {
                    document.querySelector('.founder-image img').style.display = 'none';
                    document.getElementById('founder-fallback').style.display = 'flex';
                }
            });

            // Newsletter form submission
            document.getElementById('newsletterForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const emailInput = this.querySelector('input[type="email"]');
                const email = emailInput.value.trim();
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                
                if (!email || !emailRegex.test(email)) {
                    alert('Please enter a valid email address');
                    return;
                }
                
                // Show loading state
                const submitBtn = this.querySelector('button[type="submit"]');
                const originalText = submitBtn.textContent;
                submitBtn.textContent = 'Subscribing...';
                submitBtn.disabled = true;
                
                // Create FormData object
                const formData = new FormData(this);
                
                // Send form data using Fetch API
                fetch(this.action, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                })
                .then(response => {
                    if (response.ok) {
                        // Show success message
                        document.getElementById('newsletterSuccess').style.display = 'block';
                        
                        // Form submission tracking for Google Analytics
                        if (typeof gtag !== 'undefined') {
                            gtag('event', 'form_submission', {
                                'event_category': 'newsletter',
                                'event_label': 'newsletter_subscription'
                            });
                        }
                        
                        // Reset form
                        this.reset();
                    } else {
                        throw new Error('Form submission failed');
                    }
                })
                .catch(error => {
                    alert('There was a problem with your subscription. Please try again later.');
                })
                .finally(() => {
                    // Reset button
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                    
                    // Hide success message after 5 seconds
                    setTimeout(() => {
                        document.getElementById('newsletterSuccess').style.display = 'none';
                        }, 5000);
                });
            });

           // Function to load blog posts from localStorage - UPDATED CODE
            function loadBlogPostsToWebsite() {
                const blogContainer = document.getElementById('dynamic-blog-container');
                const postsJSON = localStorage.getItem('blogPosts');
                const posts = postsJSON ? JSON.parse(postsJSON) : [];
                
                // Clear existing content
                blogContainer.innerHTML = '';
                
                if (posts.length === 0) {
                    // Show default content if no posts exist
                    blogContainer.innerHTML = `
                        <div class="blog-card">
                            <div class="blog-image">
                                <div class="image-fallback">
                                    <i class="fas fa-book"></i>
                                </div>
                            </div>
                            <div class="blog-content">
                                <div class="blog-date">July 20, 2023</div>
                                <h3 class="blog-title">Why Study Abroad: Benefits & Opportunities</h3>
                                <p class="blog-excerpt">Discover the life-changing benefits of studying in a foreign country and how it can transform your career prospects.</p>
                                <a href="https://www.facebook.com/share/16ZuMVLV3g/?mibextid=wwXIfr" class="btn btn-outline btn-small" target="_blank" rel="noopener noreferrer">Read More</a>
                            </div>
                        </div>
                        
                        <div class="blog-card">
                            <div class="blog-image">
                                <div class="image-fallback">
                                    <i class="fas fa-plane"></i>
                                </div>
                            </div>
                            <div class="blog-content">
                                <div class="blog-date">July 15, 2023</div>
                                <h3 class="blog-title">Why You Need a Professional Travel Agency</h3>
                                <p class="blog-excerpt">Learn how working with experienced travel consultants can save you time, money, and stress in your immigration journey.</p>
                                <a href="https://www.facebook.com/share/16ZuMVLV3g/?mibextid=wwXIfr" class="btn btn-outline btn-small" target="_blank" rel="noopener noreferrer">Read More</a>
                            </div>
                        </div>
                        
                        <div class="blog-card">
                            <div class="blog-image">
                                <div class="image-fallback">
                                    <i class="fas fa-passport"></i>
                                </div>
                            </div>
                            <div class="blog-content">
                                <div class="blog-date">July 10, 2023</div>
                                <h3 class="blog-title">Top 10 Visa Interview Tips for Success</h3>
                                <p class="blog-excerpt">Expert advice on how to prepare for your visa interview and increase your chances of approval.</p>
                                <a href="https://www.facebook.com/share/16ZuMVLV3g/?mibextid=wwXIfr" class="btn btn-outline btn-small" target="_blank" rel="noopener noreferrer">Read More</a>
                            </div>
                        </div>
                    `;
                    return;
                }
                
                // Display posts from localStorage
                posts.forEach(post => {
                    const formattedDate = new Date(post.date).toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                    
                    const blogCard = document.createElement('div');
                    blogCard.className = 'blog-card';
                    blogCard.innerHTML = `
                        <div class="blog-image">
                            <picture>
                                <source srcset="${post.image}" type="image/webp">
                                <source srcset="${post.image.replace('.webp', '.jpg')}" type="image/jpeg"> 
                                <img src="${post.image.replace('.webp', '.jpg')}" alt="${post.title}" loading="lazy" onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1488646953014-85cb44e25828?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80'">
                            </picture>
                        </div>
                        <div class="blog-content">
                            <div class="blog-date">${formattedDate}</div>
                            <h3 class="blog-title">${post.title}</h3>
                            <p class="blog-excerpt">${post.excerpt}</p>
                            <a href="${post.link}" class="btn btn-outline btn-small" target="_blank" rel="noopener noreferrer">Read More</a>
                        </div>
                    `;
                    
                    blogContainer.appendChild(blogCard);
                });
            }

            // Load blog posts when the page is ready
            loadBlogPostsToWebsite();
            
            // Optional: Add an event listener to refresh blog posts if they're updated
            // This would be useful if you had multiple tabs open
            window.addEventListener('storage', function(e) {
                if (e.key === 'blogPosts') {
                    loadBlogPostsToWebsite();
                }
            });
        });
    </script>
</body>
</html>